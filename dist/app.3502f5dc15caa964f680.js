webpackJsonp([0],[function(module,exports,__webpack_require__){(function(global){/*!
built in 2017-3-28:16:5 version 2.2.5 by 司徒正美
https://github.com/RubyLouvre/avalon/tree/2.2.4

修正IE下 orderBy BUG
更改下载Promise的提示
修复avalon.modern 在Proxy 模式下使用ms-for 循环对象时出错的BUG
修复effect内部传参 BUG
重构ms-validate的绑定事件的机制

*/
!function(global,factory){module.exports=factory()}(0,function(){"use strict";function Cache(maxLength){this.size=0,this.limit=maxLength,this.head=this.tail=void 0,this._keymap={}}function directive(name,opts){return directives[name]&&avalon.warn(name,"directive have defined! "),directives[name]=opts,opts.update||(opts.update=function(){}),opts.delay&&(delayCompile[name]=1),opts}function delayCompileNodes(dirs){for(var i in delayCompile)if("ms-"+i in dirs)return!0}function avalon(el){return new avalon.init(el)}function shadowCopy(destination,source){for(var property in source)destination[property]=source[property];return destination}function oneObject(array,val){"string"==typeof array&&(array=array.match(rword)||[]);for(var result={},value=void 0!==val?val:1,i=0,n=array.length;i<n;i++)result[array[i]]=value;return result}function quote(str){return avalon._quote(str)}function log(){hasConsole&&avalon.config.debug&&Function.apply.call(console.log,console,arguments)}function warn(){if(hasConsole&&avalon.config.debug){var method=console.warn||console.log;Function.apply.call(method,console,arguments)}}function error(str,e){throw(e||Error)(str)}function noop(){}function isObject(a){return null!==a&&"object"==typeof a}function range(start,end,step){step||(step=1),null==end&&(end=start||0,start=0);for(var index=-1,length=Math.max(0,Math.ceil((end-start)/step)),result=new Array(length);++index<length;)result[index]=start,start+=step;return result}function hyphen(target){return target.replace(rhyphen,"$1-$2").toLowerCase()}function camelize(target){return!target||target.indexOf("-")<0&&target.indexOf("_")<0?target:target.replace(rcamelize,function(match){return match.charAt(1).toUpperCase()})}function slice(nodes,start,end){return _slice.call(nodes,start,end)}function makeHashCode(prefix){return prefix=prefix||"avalon",String(Math.random()+Math.random()).replace(rhashcode,prefix)}function getLongID(fn){return fn.uuid||(fn.uuid=makeHashCode("e"))}function getShortID(fn){return fn.uuid||(fn.uuid="_"+ ++UUID)}function escapeRegExp(target){return(target+"").replace(rescape,"\\$&")}function createFragment(){return document$1.createDocumentFragment()}function config(settings){for(var p in settings){var val=settings[p];"function"==typeof config.plugins[p]?config.plugins[p](val):config[p]=val}return this}function createAnchor(nodeValue){return document$1.createComment(nodeValue)}function isNative(fn){return/\[native code\]/.test(fn)}function iterator(vars,body,ret){var fun="for(var "+vars+"i=0,n = this.length; i < n; i++){"+body.replace("_","((i in this) && fn.call(scope,this[i],i,this))")+"}"+ret;return Function("fn,scope",fun)}function isWindowCompact(obj){return!!obj&&(obj==obj.document&&obj.document!=obj)}function isWindowModern(obj){return rwindow.test(inspect.call(obj))}function isPlainObjectCompact(obj,key){if(!obj||"object"!==avalon.type(obj)||obj.nodeType||avalon.isWindow(obj))return!1;try{if(obj.constructor&&!ohasOwn.call(obj,"constructor")&&!ohasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1;obj.$vbthis}catch(e){return!1}if(enumerateBUG)for(key in obj)return ohasOwn.call(obj,key);for(key in obj);return key===undefined$1||ohasOwn.call(obj,key)}function isPlainObjectModern(obj){return"[object Object]"===inspect.call(obj)&&Object.getPrototypeOf(obj)===Object.prototype}function innerExtend(isDeep,array){for(var copyIsArray,clone,name,target=array[0],i=1,length=array.length;i<length;i++){var options=array[i],noCloneArrayMethod=Array.isArray(options);for(name in options)if(!noCloneArrayMethod||options.hasOwnProperty(name)){try{var src=target[name],copy=options[name]}catch(e){continue}target!==copy&&(isDeep&&copy&&(avalon.isPlainObject(copy)||(copyIsArray=Array.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&Array.isArray(src)?src:[]):clone=src&&avalon.isPlainObject(src)?src:{},target[name]=innerExtend(isDeep,[clone,copy])):copy!==undefined$1&&(target[name]=copy))}}return target}function isArrayLike(obj){if(!obj)return!1;var n=obj.length;if(n===n>>>0){var type=inspect.call(obj);if(rarraylike.test(type))return!0;if("[object Object]"!==type)return!1;try{return!1!=={}.propertyIsEnumerable.call(obj,"length")||rfunction.test(obj.item||obj.callee)}catch(e){return!obj.window}}return!1}function toFixedFix(n,prec){var k=Math.pow(10,prec);return""+(Math.round(n*k)/k).toFixed(prec)}function numberFilter(number,decimals,point,thousands){number=(number+"").replace(/[^0-9+\-Ee.]/g,"");var n=isFinite(+number)?+number:0,prec=isFinite(+decimals)?Math.abs(decimals):3,sep="string"==typeof thousands?thousands:",",dec=point||".",s="";return s=(prec?toFixedFix(n,prec):""+Math.round(n)).split("."),s[0].length>3&&(s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,sep)),s.join(dec)}function sanitizeFilter(str){return str.replace(rscripts,"").replace(ropen,function(a,b){var match=a.toLowerCase().match(/<(\w+)\s/);if(match){var reg=rsanitize[match[1]];reg&&(a=a.replace(reg,function(s,name,value){var quote=value.charAt(0);return name+"="+quote+"javascript:void(0)"+quote}))}return a.replace(ron," ").replace(/\s+/g," ")})}function toInt(str){return parseInt(str,10)||0}function padNumber(num,digits,trim){var neg="";for(num<0&&(neg="-",num=-num),num=""+num;num.length<digits;)num="0"+num;return trim&&(num=num.substr(num.length-digits)),neg+num}function dateGetter(name,size,offset,trim){return function(date){var value=date["get"+name]();return(offset>0||value>-offset)&&(value+=offset),0===value&&-12===offset&&(value=12),padNumber(value,size,trim)}}function dateStrGetter(name,shortForm){return function(date,formats){var value=date["get"+name]();return formats[(shortForm?"SHORT"+name:name).toUpperCase()][value]}}function timeZoneGetter(date){var zone=-1*date.getTimezoneOffset(),paddedZone=zone>=0?"+":"";return paddedZone+=padNumber(Math[zone>0?"floor":"ceil"](zone/60),2)+padNumber(Math.abs(zone%60),2)}function ampmGetter(date,formats){return date.getHours()<12?formats.AMPMS[0]:formats.AMPMS[1]}function dateFilter(date,format){var fn,match,locate=dateFilter.locate,text="",parts=[];if(format=format||"mediumDate",format=locate[format]||format,"string"==typeof date)if(/^\d+$/.test(date))date=toInt(date);else if(raspnetjson.test(date))date=+RegExp.$1;else{var trimDate=date.trim(),dateArray=[0,0,0,0,0,0,0],oDate=new Date(0);trimDate=trimDate.replace(/^(\d+)\D(\d+)\D(\d+)/,function(_,a,b,c){var array=4===c.length?[c,a,b]:[a,b,c];return dateArray[0]=toInt(array[0]),dateArray[1]=toInt(array[1])-1,dateArray[2]=toInt(array[2]),""});var dateSetter=oDate.setFullYear,timeSetter=oDate.setHours;trimDate=trimDate.replace(/[T\s](\d+):(\d+):?(\d+)?\.?(\d)?/,function(_,a,b,c,d){return dateArray[3]=toInt(a),dateArray[4]=toInt(b),dateArray[5]=toInt(c),d&&(dateArray[6]=Math.round(1e3*parseFloat("0."+d))),""});var tzHour=0,tzMin=0;trimDate=trimDate.replace(/Z|([+-])(\d\d):?(\d\d)/,function(z,symbol,c,d){return dateSetter=oDate.setUTCFullYear,timeSetter=oDate.setUTCHours,symbol&&(tzHour=toInt(symbol+c),tzMin=toInt(symbol+d)),""}),dateArray[3]-=tzHour,dateArray[4]-=tzMin,dateSetter.apply(oDate,dateArray.slice(0,3)),timeSetter.apply(oDate,dateArray.slice(3)),date=oDate}for("number"==typeof date&&(date=new Date(date));format;)match=rdateFormat.exec(format),match?(parts=parts.concat(match.slice(1)),format=parts.pop()):(parts.push(format),format=null);return parts.forEach(function(value){fn=DATE_FORMATS[value],text+=fn?fn(date,locate):value.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),text}function orderBy(array,by,decend){var type=avalon.type(array);if("array"!==type&&"object"!==type)throw"orderBy只能处理对象或数组";var criteria="string"==typeof by?function(el){return el&&el[by]}:"function"==typeof by?by:function(el){return el},mapping={},temp=[];__repeat(array,Array.isArray(array),function(key){var val=array[key],k=criteria(val,key);k in mapping?mapping[k].push(key):mapping[k]=[key],temp.push(k)}),temp.sort(),decend<0&&temp.reverse();var _array="array"===type,target=_array?[]:{};return recovery(target,temp,function(k){var key=mapping[k].shift();_array?target.push(array[key]):target[key]=array[key]})}function __repeat(array,isArray$$1,cb){if(isArray$$1)array.forEach(function(val,index){cb(index)});else if("string"==typeof array.$track)array.$track.replace(/[^☥]+/g,function(k){cb(k)});else for(var i in array)array.hasOwnProperty(i)&&cb(i)}function filterBy(array,search){var type=avalon.type(array);if("array"!==type&&"object"!==type)throw"filterBy只能处理对象或数组";var args=avalon.slice(arguments,2),stype=avalon.type(search);if("function"===stype)var criteria=search._orig||search;else{if("string"!==stype&&"number"!==stype)return array;if(""===search)return array;var reg=new RegExp(avalon.escapeRegExp(search),"i");criteria=function(el){return reg.test(el)}}var isArray$$1="array"===type,target=isArray$$1?[]:{};return __repeat(array,isArray$$1,function(key){var val=array[key];criteria.apply({key:key},[val,key].concat(args))&&(isArray$$1?target.push(val):target[key]=val)}),target}function selectBy(data,array,defaults){if(avalon.isObject(data)&&!Array.isArray(data)){var target=[];return recovery(target,array,function(name){target.push(data.hasOwnProperty(name)?data[name]:defaults?defaults[name]:"")})}return data}function limitBy(input,limit,begin){var type=avalon.type(input);if("array"!==type&&"object"!==type)throw"limitBy只能处理对象或数组";if("number"!=typeof limit)return input;if(limit!==limit)return input;"object"===type&&(input=convertArray(input,!1));var n=input.length;limit=Math.floor(Math.min(n,limit)),(begin="number"==typeof begin?begin:0)<0&&(begin=Math.max(0,n+begin));for(var data=[],i=begin;i<n&&data.length!==limit;i++)data.push(input[i]);if("array"===type)return data;var target={};return recovery(target,data,function(el){target[el.key]=el.value})}function recovery(ret,array,callback){for(var i=0,n=array.length;i<n;i++)callback(array[i]);return ret}function convertArray(array,isArray$$1){var ret=[],i=0;return __repeat(array,isArray$$1,function(key){ret[i]={oldIndex:i,value:array[key],key:key},i++}),ret}function escapeFilter(str){return null==str?"":String(str).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function fixElement(dest,src){if(1===dest.nodeType){var nodeName=dest.nodeName.toLowerCase();if("script"===nodeName)dest.text!==src.text&&(dest.type="noexec",dest.text=src.text,dest.type=src.type||"");else if("object"===nodeName){var params=src.childNodes;if(dest.childNodes.length!==params.length){avalon.clearHTML(dest);for(var el,i=0;el=params[i++];)dest.appendChild(el.cloneNode(!0))}}else"input"===nodeName&&rcheckedType.test(src.nodeName)?(dest.defaultChecked=dest.checked=src.checked,dest.value!==src.value&&(dest.value=src.value)):"option"===nodeName?dest.defaultSelected=dest.selected=src.defaultSelected:"input"!==nodeName&&"textarea"!==nodeName||(dest.defaultValue=src.defaultValue)}}function getAll(context){return void 0!==context.getElementsByTagName?context.getElementsByTagName("*"):void 0!==context.querySelectorAll?context.querySelectorAll("*"):[]}function fixClone(src){for(var target=src.cloneNode(!0),t=getAll(target),s=getAll(src),i=0;i<s.length;i++)fixElement(t[i],s[i]);return target}function fixContains(root,el){try{for(;el=el.parentNode;)if(el===root)return!0}catch(e){}return!1}function ClassList(node){this.node=node}function classListFactory(node){return"classList"in node||(node.classList=new ClassList(node)),node.classList}function isVML(src){var nodeName=src.nodeName;return nodeName.toLowerCase()===nodeName&&!!src.scopeName&&""===src.outerText}function compactParseJSON(data){if("string"==typeof data){if((data=data.trim())&&rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,"")))return new Function("return "+data)();throw TypeError("Invalid JSON: ["+data+"]")}return data}function updateAttrs(node,attrs){for(var attrName in attrs)try{var val=attrs[attrName];if(0===attrName.indexOf("data-")||rsvg.test(node))node.setAttribute(attrName,val);else{var propName=propMap[attrName]||attrName;if("boolean"==typeof node[propName]&&("checked"===propName&&(node.defaultChecked=!!val),node[propName]=!!val),!1===val){node.removeAttribute(propName);continue}if(avalon.msie<8&&/[A-Z]/.test(propName)){node[propName]=val+"";continue}!(avalon.modern||!isVML(node))||isInnateProps(node.nodeName,attrName)?("href"!==attrName&&"src"!==attrName||avalon.msie<8&&(val=String(val).replace(ramp,"&")),node[propName]=val+""):node.setAttribute(attrName,val)}}catch(e){avalon.log(String(e.message).trim(),attrName,val)}}function isInnateProps(nodeName,attrName){var key=nodeName+":"+attrName;return key in innateMap?innateMap[key]:innateMap[key]=attrName in document$1.createElement(nodeName)}function showHidden(node,array){if(node.offsetWidth<=0){if(rdisplayswap.test(cssHooks["@:get"](node,"display"))){var obj={node:node};for(var name in cssShow)obj[name]=node.style[name],node.style[name]=cssShow[name];array.push(obj)}var parent=node.parentNode;parent&&1===parent.nodeType&&showHidden(parent,array)}}function getWindow(node){return node.window||node.defaultView||node.parentWindow||!1}function getDuplexType(elem){var ret=elem.tagName.toLowerCase();return"input"===ret?rcheckedType.test(elem.type)?"checked":elem.type:ret}function getOption(node){if(node.hasAttribute&&node.hasAttribute("value"))return node.getAttribute("value");var attr=node.getAttributeNode("value");return attr&&attr.specified?attr.value:node.innerHTML.trim()}function dig(a){var key="??"+stringNum++;return stringPool.map[key]=a,key+" "}function fill(a){return stringPool.map[a]}function clearString(str){for(var array=readString(str),i=0,n=array.length;i<n;i++)str=str.replace(array[i],dig);return str}function readString(str,i,ret){var end=!1,s=0,i=i||0;ret=ret||[];for(var n=str.length;i<n;i++){var c=str.charAt(i);end?c===end&&(ret.push(str.slice(s,i+1)),end=!1):"'"===c?(end="'",s=i):'"'===c&&(end='"',s=i)}return!1!==end?readString(str,s+1,ret):ret}function makeOrphan(node,nodeName,innerHTML){switch(nodeName){case"style":case"script":case"noscript":case"template":case"xmp":node.children=[{nodeName:"#text",nodeValue:innerHTML}];break;case"textarea":var props=node.props;props.type=nodeName,props.value=innerHTML,node.children=[{nodeName:"#text",nodeValue:innerHTML}];break;case"option":node.children=[{nodeName:"#text",nodeValue:trimHTML(innerHTML)}]}}function trimHTML(v){return String(v).replace(rtrimHTML,"").trim()}function makeTbody(nodes){for(var tbody,needAddTbody=!1,count=0,start=0,n=nodes.length,i=0;i<n;i++){var node=nodes[i];tbody?"tr"!==node.nodeName&&node.children?tbody=!1:(tbody.children.push(node),count++,nodes[i]=0):"tr"===node.nodeName&&(tbody={nodeName:"tbody",props:{},children:[]},tbody.children.push(node),needAddTbody=!0,0===start&&(start=i),nodes[i]=tbody)}if(needAddTbody)for(i=start;i<n&&(0!==nodes[i]||(nodes.splice(i,1),i--,0!==--count));i++);}function validateDOMNesting(parent,child){var parentTag=parent.nodeName,tag=child.nodeName,parentChild=nestObject[parentTag];if(parentChild)if("p"===parentTag){if(pNestChild[tag])return avalon.warn("P element can not  add these childlren:\n"+Object.keys(pNestChild)),!1}else if(!parentChild[tag])return avalon.warn(parentTag.toUpperCase()+"element only add these children:\n"+Object.keys(parentChild)+"\nbut you add "+tag.toUpperCase()+" !!"),!1;return!0}function makeObject(str){return oneObject(str+",template,#document-fragment,#comment")}function nomalString(str){return avalon.unescapeHTML(str.replace(rfill,fill))}function fromString(str){return from(str)}function AST(){}function from(str){var cacheKey=str,cached=strCache.get(cacheKey);if(cached)return avalon.mix(!0,[],cached);stringPool.map={},str=clearString(str),vdomAst.init(str);var ret=vdomAst.gen();return strCache.put(cacheKey,avalon.mix(!0,[],ret)),ret}function setEventId(node,value){node.setAttribute("avalon-events",value)}function collectHandlers(elem,type,handlers){var value=elem.getAttribute("avalon-events");if(value&&(!0!==elem.disabled||"click"!==type)){var uuids=[],reg=typeRegExp[type]||(typeRegExp[type]=new RegExp("\\b"+type+"\\:([^,\\s]+)","g"));value.replace(reg,function(a,b){return uuids.push(b),a}),uuids.length&&handlers.push({elem:elem,uuids:uuids})}elem=elem.parentNode;var g=avalon.gestureEvents||{};elem&&elem.getAttribute&&(canBubbleUp[type]||g[type])&&collectHandlers(elem,type,handlers)}function dispatch(event){event=new avEvent(event);var type=event.type,elem=event.target,handlers=[];collectHandlers(elem,type,handlers);for(var j,uuid,handler,i=0;(handler=handlers[i++])&&!event.cancelBubble;){event.currentTarget=handler.elem;for(j=0;(uuid=handler.uuids[j++])&&!event.stopImmediate;){var fn=avalon.eventListeners[uuid];if(fn){var vm=rhandleHasVm.test(uuid)?handler.elem._ms_context_:0;if(vm&&!1===vm.$hashcode)return avalon.unbind(elem,type,fn);!1===fn.call(vm||elem,event)&&(event.preventDefault(),event.stopPropagation())}}}}function delegateEvent(type){var value=root.getAttribute("delegate-events")||"";if(-1===value.indexOf(type)){var arr=value.match(avalon.rword)||[];arr.push(type),root.setAttribute("delegate-events",arr.join(",")),avalon._nativeBind(root,type,dispatch,!!focusBlur[type])}}function avEvent(event){if(event.originalEvent)return event;for(var i in event)eventProto[i]||(this[i]=event[i]);this.target||(this.target=event.srcElement);this.target;this.fixEvent(),this.timeStamp=new Date-0,this.originalEvent=event}function fireReady(fn){for(avalon.isReady=!0;fn=readyList.shift();)fn(avalon)}function fromDOM(dom){return[from$1(dom)]}function from$1(node){var type=node.nodeName.toLowerCase();switch(type){case"#text":case"#comment":return{nodeName:type,dom:node,nodeValue:node.nodeValue};default:var props=markProps(node,node.attributes||[]),vnode={nodeName:type,dom:node,isVoidTag:!!voidTag[type],props:props};if("option"===type&&(props.selected=node.selected),orphanTag[type]||"option"===type)makeOrphan(vnode,type,node.text||node.innerHTML),1===node.childNodes.length&&(vnode.children[0].dom=node.firstChild);else if(!vnode.isVoidTag){vnode.children=[];for(var el,i=0;el=node.childNodes[i++];){var child=from$1(el);/\S/.test(child.nodeValue)&&vnode.children.push(child)}}return vnode}}function markProps(node,attrs){for(var ret={},i=0,n=attrs.length;i<n;i++){var attr=attrs[i];attr.specified&&(ret[attr.name.toLowerCase()]=attr.value)}if(rformElement.test(node.nodeName)){ret.type=node.type;var a=node.getAttributeNode("value");a&&/\S/.test(a.value)&&(ret.value=a.value)}var style=node.style.cssText;return style&&(ret.style=style),"select-one"===ret.type&&(ret.selectedIndex=node.selectedIndex),ret}function VText(text){this.nodeName="#text",this.nodeValue=text}function VComment(text){this.nodeName="#comment",this.nodeValue=text}function VElement(type,props,children,isVoidTag){this.nodeName=type,this.props=props,this.children=children,this.isVoidTag=isVoidTag}function hackIE(dom,nodeName,template){switch(nodeName){case"style":dom.setAttribute("type","text/css"),dom.styleSheet.cssText=template;break;case"xmp":case"noscript":dom.textContent=template}}function skipFalseAndFunction(a){return!1!==a&&Object(a)!==a}function createSVG(type){return document$1.createElementNS("http://www.w3.org/2000/svg",type)}function createVML(type){document$1.styleSheets.length<31?document$1.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):document$1.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");var arr=type.split(":");1===arr.length&&arr.unshift("v");var tag=arr[1],ns=arr[0];return document$1.namespaces[ns]||document$1.namespaces.add(ns,"urn:schemas-microsoft-com:vml"),document$1.createElement("<"+ns+":"+tag+' class="rvml">')}function VFragment(children,key,val,index){this.nodeName="#document-fragment",this.children=children,this.key=key,this.val=val,this.index=index,this.props={}}function runActions(){if(!(!0===avalon.isRunningActions||avalon.inTransaction>0)){avalon.isRunningActions=!0;for(var task,tasks=avalon.pendingActions.splice(0,avalon.pendingActions.length),i=0;task=tasks[i++];)task.update(),delete avalon.uniqActions[task.uuid];avalon.isRunningActions=!1}}function propagateChanged(target){for(var el,list=target.observers,i=0;el=list[i++];)el.schedule()}function reportObserved(target){var action=avalon.trackingAction||null;null!==action&&(avalon.track("征收到",target.expr),action.mapIDs[target.uuid]=target)}function collectDeps(action,getter){if(action.observers){var preAction=avalon.trackingAction;preAction&&targetStack.push(preAction),avalon.trackingAction=action,avalon.track("【action】",action.type,action.expr,"开始征收依赖项"),action.mapIDs={};var result,hasError=!0;try{result=getter.call(action),hasError=!1}finally{if(hasError)avalon.warn("collectDeps fail",getter+""),action.mapIDs={},avalon.trackingAction=preAction;else{avalon.trackingAction=targetStack.pop();try{resetDeps(action)}catch(e){avalon.warn(e)}}return result}}}function resetDeps(action){var prev=action.observers,curr=[],checked={},ids=[];for(var i in action.mapIDs){var dep=action.mapIDs[i];if(!dep.isAction){if(!dep.observers){delete action.mapIDs[i];continue}if(ids.push(dep.uuid),curr.push(dep),checked[dep.uuid]=1,dep.lastAccessedBy===action.uuid)continue;dep.lastAccessedBy=action.uuid,avalon.Array.ensure(dep.observers,action)}}var ids=ids.sort().join(",");if(ids!==action.ids){if(action.ids=ids,action.isComputed){action.depsCount=curr.length,action.deps=avalon.mix({},action.mapIDs),action.depsVersion={};for(var _i in action.mapIDs){var _dep=action.mapIDs[_i];action.depsVersion[_dep.uuid]=_dep.version}}else action.observers=curr;for(var _dep2,_i2=0;_dep2=prev[_i2++];)checked[_dep2.uuid]||avalon.Array.remove(_dep2.observers,action)}}function transaction(action,thisArg,args){args=args||[];var name="transaction "+(action.name||action.displayName||"noop");transactionStart(name);var res=action.apply(thisArg,args);return transactionEnd(name),res}function transactionStart(name){avalon.inTransaction+=1}function transactionEnd(name){0==--avalon.inTransaction&&(avalon.isRunningActions=!1,runActions())}function addScopeForLocal(str){return str.replace(robjectProp,dig).replace(rlocalVar,function(el){return skipMap[el]?el:"__vmodel__."+el})}function addScope(expr,type){var cacheKey=expr+":"+type,cache=exprCache.get(cacheKey);if(cache)return cache.slice(0);stringPool.map={};var input=expr.replace(rregexp,function(a,b){return b+dig(a.slice(b.length))});input=clearString(input),input=input.replace(rshortCircuit,dig).replace(ruselessSp,"$1").replace(robjectKey,function(_,a,b){return a+dig(b)+":"}).replace(rvmKey,"$1__vmodel__.").replace(rfilterName,function(a,b){return"|"+dig(b)}),input=addScopeForLocal(input);var filters=input.split(rpipeline),body=filters.shift().replace(rfill,fill).trim();return/\?\?\d/.test(body)&&(body=body.replace(rfill,fill)),filters.length?(filters=filters.map(function(filter){var bracketArgs="";return filter=filter.replace(brackets,function(a,b){return/\S/.test(b)&&(bracketArgs+=","+b),""}),"["+avalon.quote(filter.trim())+bracketArgs+"]"}),filters="avalon.composeFilters("+filters+")(__value__)",filters=filters.replace(rfill,fill)):filters="",exprCache.put(cacheKey,[body,filters])}function makeHandle(body){return rhandleName.test(body)&&(body+="($event)"),msie<9&&(body=body.replace(rfixIE678,function(a,b,c){return"__vmodel__."+b+".call(__vmodel__"+(/\S/.test(c)?","+c:"")+")"})),body}function createGetter(expr,type){var body,arr=addScope(expr,type);body=arr[1]?arr[1].replace(/__value__\)$/,arr[0]+")"):arr[0];try{return new Function("__vmodel__","return "+body+";")}catch(e){return avalon.log("parse getter: [",expr,body,"]error"),avalon.noop}}function createSetter(expr,type){var arr=addScope(expr,type),body="try{ "+arr[0]+" = __value__}catch(e){}";try{return new Function("__vmodel__","__value__",body+";")}catch(e){return avalon.log("parse setter: ",expr," error"),avalon.noop}}function Action(vm,options,callback){for(var i in options)1!==protectedMenbers[i]&&(this[i]=options[i]);this.vm=vm,this.observers=[],this.callback=callback,this.uuid=++actionUUID,this.ids="",this.mapIDs={},this.isAction=!0;var expr=this.expr;"function"!=typeof this.getter&&(this.getter=createGetter(expr,this.type)),"duplex"===this.type&&(this.setter=createSetter(expr,this.type)),this.value=NaN,this.node||(this.value=this.get())}function getPlainObject(v){if(v&&"object"==typeof v){if(v&&v.$events)return v.$model;if(Array.isArray(v)){for(var i,ret=[],n=v.length;i<n;i++)ret.push(getPlainObject(v[i]));return ret}var _ret={};for(var _i3 in v)_ret[_i3]=getPlainObject(v[_i3]);return _ret}return v}function Mutation(expr,value,vm){if(this.expr=expr,value){var childVm=platform.createProxy(value,this);childVm&&(value=childVm)}this.value=value,this.vm=vm;try{vm.$mutations[expr]=this}catch(ignoreIE){}this.uuid=++obid,this.updateVersion(),this.mapIDs={},this.observers=[]}function getBody(fn){var entire=fn.toString();return entire.substring(entire.indexOf("{}")+1,entire.lastIndexOf("}"))}function __create(o){var __=function(){};return __.prototype=o,new __}function __extends(child,parent){if("function"==typeof parent){(child.prototype=__create(parent.prototype)).constructor=child}}function IProxy(definition,dd){avalon.mix(this,definition),avalon.mix(this,$$skipArray),this.$hashcode=avalon.makeHashCode("$"),this.$id=this.$id||this.$hashcode,this.$events={__dep__:dd||new Mutation(this.$id)},avalon.config.inProxyMode?(delete this.$mutations,this.$accessors={},this.$computed={},this.$track=""):this.$accessors={$model:modelAccessor},void 0===dd?(this.$watch=platform.watchFactory(this.$events),this.$fire=platform.fireFactory(this.$events)):(delete this.$watch,delete this.$fire)}function canHijack(key,val,$proxyItemBackdoor){return!(key in $$skipArray)&&("$"===key.charAt(0)?!!$proxyItemBackdoor&&($proxyItemBackdoorMap[key]||($proxyItemBackdoorMap[key]=1,avalon.warn("ms-for中的变量"+key+"不再建议以$为前缀")),!0):null==val?(avalon.warn("定义vmodel时"+key+"的属性值不能为null undefine"),!0):!/error|date|function|regexp/.test(avalon.type(val))&&!(val&&val.nodeName&&val.nodeType))}function createProxy(target,dd){if(target&&target.$events)return target;var vm;return Array.isArray(target)?vm=platform.listFactory(target,!1,dd):isObject(target)&&(vm=platform.modelFactory(target,dd)),vm}function createAccessor(key,val,isComputed){var mutation=null,Accessor=isComputed?Computed:Mutation;return{get:function(){return mutation||(mutation=new Accessor(key,val,this)),mutation.get()},set:function(newValue){mutation||(mutation=new Accessor(key,val,this)),mutation.set(newValue)},enumerable:!0,configurable:!0}}function toJson(val){var xtype=avalon.type(val);if("array"===xtype){for(var array=[],i=0;i<val.length;i++)array[i]=toJson(val[i]);return array}if("object"===xtype&&"string"==typeof val.$track){var obj={};return(val.$track.match(/[^☥]+/g)||[]).forEach(function(i){var value=val[i];obj[i]=value&&value.$events?toJson(value):value}),obj}return val}function hijackMethods(array){for(var i in __array__)platform.hideProperty(array,i,__array__[i])}function listFactory(array,stop,dd){stop||(hijackMethods(array),modern&&Object.defineProperty(array,"$model",platform.modelAccessor),platform.hideProperty(array,"$hashcode",avalon.makeHashCode("$")),platform.hideProperty(array,"$events",{__dep__:dd||new Mutation}));for(var _dd=array.$events&&array.$events.__dep__,i=0,n=array.length;i<n;i++){var item=array[i];isObject(item)&&(array[i]=platform.createProxy(item,_dd))}return array}function hideProperty(host,name,value){canHideProperty?Object.defineProperty(host,name,{value:value,writable:!0,enumerable:!1,configurable:!0}):protectedVB[name]||(host[name]=value)}function watchFactory(core){return function(expr,callback,deep){var w=new Action(core.__proxy__,{deep:deep,type:"user",expr:expr},callback);return core[expr]?core[expr].push(w):core[expr]=[w],function(){w.dispose(),avalon.Array.remove(core[expr],w),0===core[expr].length&&delete core[expr]}}}function fireFactory(core){return function(expr,a){var list=core[expr];if(Array.isArray(list))for(var w,i=0;w=list[i++];)w.callback.call(w.vm,a,w.value,w.expr)}}function wrapIt(str){return"☥"+str+"☥"}function afterCreate(vm,core,keys,bindThis){function hasOwnKey(key){return wrapIt(vm.$track).indexOf(wrapIt(key))>-1}var ac=vm.$accessors;for(var key in $$skipArray)avalon.msie<9&&void 0===core[key]||hideProperty(vm,key,core[key]);for(var i=0;i<keys.length;i++){var _key2=keys[i];if(!(_key2 in ac)){var val=core[_key2];if(bindThis&&"function"==typeof val){vm[_key2]=val.bind(vm),vm[_key2]._orig=val;continue}vm[_key2]=val}}vm.$track=keys.join("☥"),avalon.msie<9&&(vm.hasOwnProperty=hasOwnKey),vm.$events.__proxy__=vm}function getEnumerableKeys(obj){var res=[];for(var key in obj)res.push(key);return res}function deepEquals(a,b,level){if(0===level)return a===b;if(null===a&&null===b)return!0;if(void 0===a&&void 0===b)return!0;var aIsArray=Array.isArray(a);return aIsArray===Array.isArray(b)&&(aIsArray?equalArray(a,b,level):"object"==typeof a&&"object"==typeof b?equalObject(a,b,level):a===b)}function equalArray(a,b,level){if(a.length!==b.length)return!1;for(var i=a.length-1;i>=0;i--)try{if(!deepEquals(a[i],b[i],level-1))return!1}catch(noThisPropError){return!1}return!0}function equalObject(a,b,level){if(null===a||null===b)return!1;if(getEnumerableKeys(a).length!==getEnumerableKeys(b).length)return!1;for(var prop in a){if(!(prop in b))return!1;try{if(!deepEquals(a[prop],b[prop],level-1))return!1}catch(noThisPropError){return!1}}return!0}function callNextAnimation(){var fn=animationQueue[0];fn&&fn()}function patchObject(obj,name,value){obj[name]||(obj[name]=value)}function execHooks(options,name,el){for(var fn,fns=[].concat(options[name]),i=0;fn=fns[i++];)"function"==typeof fn&&fn(el)}function createAction(action){var lower=action.toLowerCase();return function(option){var dom=this.dom,elem=avalon(dom),staggerTime=isFinite(option.stagger)?1e3*option.stagger:0;if(staggerTime&&option.staggerKey){var stagger=staggerCache.get(option.staggerKey)||staggerCache.put(option.staggerKey,{count:0,items:0});stagger.count++,stagger.items++}var stopAnimationID,staggerIndex=stagger&&stagger.count||0,animationDone=function(e){var isOk=!1!==e;0==--dom.__ms_effect_&&(avalon.unbind(dom,transitionEndEvent),avalon.unbind(dom,animationEndEvent)),clearTimeout(stopAnimationID),execHooks(option,"on"+action+(isOk?"Done":"Abort"),dom),stagger&&0==--stagger.items&&(stagger.count=0),option.queue&&(animationQueue.shift(),callNextAnimation())};execHooks(option,"onBefore"+action,dom),option[lower]?option[lower](dom,function(ok){animationDone(!1!==ok)}):css3&&(elem.addClass(option[lower+"Class"]),elem.removeClass(getNeedRemoved(option,lower)),dom.__ms_effect_?dom.__ms_effect_++:(elem.bind(transitionEndEvent,animationDone),elem.bind(animationEndEvent,animationDone),dom.__ms_effect_=1),setTimeout(function(){var time=NaN===avalon.root.offsetWidth;elem.addClass(option[lower+"ActiveClass"]),time=getAnimationTime(dom),0===!time?animationDone(!1):staggerTime||(stopAnimationID=setTimeout(function(){animationDone(!1)},time+32))},17+staggerTime*staggerIndex))}}function getAction(opts){if(!opts.action)return opts.action=opts.hook.replace(/^on/,"").replace(/Done$/,"").toLowerCase()}function getNeedRemoved(options,name){var name="leave"===name?"enter":"leave";return Array(name+"Class",name+"ActiveClass").map(function(cls){return options[cls]}).join(" ")}function toMillisecond(str){var ratio=rsecond.test(str)?1e3:1;return parseFloat(str)*ratio}function getAnimationTime(dom){var computedStyles=window$1.getComputedStyle(dom,null),tranDuration=computedStyles[transitionDuration],animDuration=computedStyles[animationDuration];return toMillisecond(tranDuration)||toMillisecond(animDuration)}function parseDisplay(elem,val){var doc=elem.ownerDocument,nodeName=elem.nodeName,key="_"+nodeName;if(!parseDisplay[key]){var temp=doc.body.appendChild(doc.createElement(nodeName));val=avalon.css(temp,"display"),doc.body.removeChild(temp),val===none&&(val="block"),parseDisplay[key]=val}return parseDisplay[key]}function continueScan(instance,vdom){var innerRender=instance.innerRender=avalon.scan(instance.fragment,instance.vm);avalon.shadowCopy(vdom,innerRender.root),delete vdom.nodeValue}function getTraceKey(item){var type=typeof item;return item&&"object"===type?item.$hashcode:type+":"+item}function createFragments(instance,obj){if(isObject(obj)){var array=Array.isArray(obj),ids=[],fragments=[],i=0;return instance.isArray=array,instance.fragments?(instance.preFragments=instance.fragments,avalon.each(obj,function(key,value){var k=array?getTraceKey(value):key;fragments.push({key:k,val:value,index:i++}),ids.push(k)}),instance.fragments=fragments):(avalon.each(obj,function(key,value){if(!(key in $$skipArray)){var k=array?getTraceKey(value):key;fragments.push(new VFragment([],k,value,i++)),ids.push(k)}}),instance.fragments=fragments),ids.join(";;")}return NaN}function mountList(instance){var args=instance.fragments.map(function(fragment,index){return FragmentDecorator(fragment,instance,index),saveInCache(instance.cache,fragment),fragment}),list=instance.parentChildren,i=list.indexOf(instance.begin);list.splice.apply(list,[i+1,0].concat(args))}function diffList(instance){var cache=instance.cache,newCache={},fuzzy=[],list=instance.preFragments;list.forEach(function(el){el._dispose=!0}),instance.fragments.forEach(function(c,index){var fragment=isInCache(cache,c.key);fragment?(delete fragment._dispose,fragment.oldIndex=fragment.index,fragment.index=index,resetVM(fragment.vm,instance.keyName),fragment.vm[instance.valName]=c.val,fragment.vm[instance.keyName]=instance.isArray?index:fragment.key,saveInCache(newCache,fragment)):fuzzy.push(c)}),fuzzy.forEach(function(c){var fragment=fuzzyMatchCache(cache,c.key);if(fragment){fragment.oldIndex=fragment.index,fragment.key=c.key;var val=fragment.val=c.val,index=fragment.index=c.index;fragment.vm[instance.valName]=val,fragment.vm[instance.keyName]=instance.isArray?index:fragment.key,delete fragment._dispose}else c=new VFragment([],c.key,c.val,c.index),fragment=FragmentDecorator(c,instance,c.index),list.push(fragment);saveInCache(newCache,fragment)}),instance.fragments=list,list.sort(function(a,b){return a.index-b.index}),instance.cache=newCache}function resetVM(vm,a,b){avalon.config.inProxyMode?vm.$accessors[a].value=NaN:vm.$accessors[a].set(NaN)}function updateList(instance){for(var item,before=instance.begin.dom,parent=before.parentNode,list=instance.fragments,end=instance.end.dom,i=0;item=list[i];i++)if(item._dispose)list.splice(i,1),i--,item.dispose();else{if(item.oldIndex!==item.index){var f=item.toFragment(),isEnd=null===before.nextSibling;parent.insertBefore(f,before.nextSibling),isEnd&&!parent.contains(end)&&parent.insertBefore(end,before.nextSibling)}before=item.split}var ch=instance.parentChildren,startIndex=ch.indexOf(instance.begin),endIndex=ch.indexOf(instance.end);list.splice.apply(ch,[startIndex+1,endIndex-startIndex].concat(list))}function FragmentDecorator(fragment,instance,index){var data={};data[instance.keyName]=instance.isArray?index:fragment.key,data[instance.valName]=fragment.val,instance.asName&&(data[instance.asName]=instance.value);var vm=fragment.vm=platform.itemFactory(instance.vm,{data:data});return instance.isArray?vm.$watch(instance.valName,function(a){instance.value&&instance.value.set&&instance.value.set(vm[instance.keyName],a)}):vm.$watch(instance.valName,function(a){instance.value[fragment.key]=a}),fragment.index=index,fragment.innerRender=avalon.scan(instance.fragment,vm,function(){var oldRoot=this.root;ap.push.apply(fragment.children,oldRoot.children),this.root=fragment}),fragment}function isInCache(cache,id){var c=cache[id];if(c){var arr=c.arr;if(arr){var r=arr.pop();return arr.length||(c.arr=0),r}return delete cache[id],c}}function saveInCache(cache,component){var trackId=component.key;if(cache[trackId]){var c=cache[trackId];(c.arr||(c.arr=[])).push(component)}else cache[trackId]=component}function fuzzyMatchCache(cache){var key;for(var id in cache){var key=id;break}if(key)return isInCache(cache,key)}function classNames(){for(var classes=[],i=0;i<arguments.length;i++){var arg=arguments[i],argType=typeof arg;if("string"===argType||"number"===argType||!0===arg)classes.push(arg);else if(Array.isArray(arg))classes.push(classNames.apply(null,arg));else if("object"===argType)for(var key in arg)arg.hasOwnProperty(key)&&arg[key]&&classes.push(key)}return classes.join(" ")}function activateClass(e){var elem=e.target;avalon(elem).addClass(elem.getAttribute(classMap[e.type])||"")}function abandonClass(e){var elem=e.target,name=classMap[e.type];avalon(elem).removeClass(elem.getAttribute(name)||""),"change-active"!==name&&avalon(elem).removeClass(elem.getAttribute("change-active")||"")}function setClass(dom,neo){var old=dom.getAttribute("change-class");old!==neo&&(avalon(dom).removeClass(old).addClass(neo),dom.setAttribute("change-class",neo))}function lookupOption(vdom,values){vdom.children&&vdom.children.forEach(function(el){"option"===el.nodeName?setOption(el,values):lookupOption(el,values)})}function setOption(vdom,values){var props=vdom.props;if(!("disabled"in props)){var value=getOptionValue(vdom,props);if(value=String(value||"").trim(),props.selected=-1!==values.indexOf(value),vdom.dom){vdom.dom.selected=props.selected;vdom.dom.selected}}}function getOptionValue(vdom,props){if(props&&"value"in props)return props.value+"";var arr=[];return vdom.children.forEach(function(el){"#text"===el.nodeName?arr.push(el.nodeValue):"#document-fragment"===el.nodeName&&arr.push(getOptionValue(el))}),arr.join("")}function getSelectedValue(vdom,arr){return vdom.children.forEach(function(el){"option"===el.nodeName?!0===el.props.selected&&arr.push(getOptionValue(el,el.props)):el.children&&getSelectedValue(el,arr)}),arr}function duplexCb(field){field.userCb&&field.userCb.call(field.vm,{type:"changed",target:field.dom})}function updateDataHandle(event){var elem=this,field=elem._ms_duplex_;if(!elem.composing&&elem.value!==field.value){if(elem.caret)try{var pos=field.getCaret(elem);field.pos=pos}catch(e){}if(field.debounceTime>4){var timestamp=new Date,left=timestamp-field.time||0;field.time=timestamp,left>=field.debounceTime?updateDataActions[field.dtype].call(field):(clearTimeout(field.debounceID),field.debounceID=setTimeout(function(){updateDataActions[field.dtype].call(field)},left))}else field.isChanged?setTimeout(function(){updateDataActions[field.dtype].call(field)},4):updateDataActions[field.dtype].call(field)}}function duplexBeforeInit(){var expr=this.expr;rchangeFilter.test(expr)&&(this.isChanged=!0,expr=expr.replace(rchangeFilter,""));var match=expr.match(rdebounceFilter);match&&(expr=expr.replace(rdebounceFilter,""),this.isChanged||(this.debounceTime=parseInt(match[1],10)||300)),this.expr=expr}function duplexInit(){var node=(this.expr,this.node),etype=node.props.type;this.parseValue=parseValue;var dtype,parsers=this.param,isChecked=!1;parsers=parsers?parsers.split("-").map(function(a){return"checked"===a&&(isChecked=!0),a}):[],node.duplex=this,rcheckedType.test(etype)&&isChecked&&(parsers=[],dtype="radio",this.isChecked=isChecked),this.parsers=parsers,/input|textarea|select/.test(node.nodeName)?dtype||(dtype="select"===node.nodeName?"select":"checkbox"===etype?"checkbox":"radio"===etype?"radio":"input"):"contenteditable"in node.props&&(dtype="contenteditable"),this.dtype=dtype,"input"!==dtype&&"contenteditable"!==dtype?(delete this.isChanged,delete this.debounceTime):this.isChecked||(this.isString=!0);var cb=node.props["data-duplex-changed"];if(cb){var arr=addScope(cb,"xx"),body=makeHandle(arr[0]);this.userCb=new Function("$event","var __vmodel__ = this\nreturn "+body)}}function duplexDiff(newVal,oldVal){if(Array.isArray(newVal)){if(newVal+""!==this.compareVal)return this.compareVal=newVal+"",!0}else if(newVal=this.parseValue(newVal),this.isChecked||(this.value=newVal+=""),newVal!==this.compareVal)return this.compareVal=newVal,!0}function duplexBind(vdom,addEvent){var dom=vdom.dom;this.dom=dom,this.vdom=vdom,this.duplexCb=updateDataHandle,dom._ms_duplex_=this,addEvent(dom,this)}function parseValue(val){for(var k,i=0;k=this.parsers[i++];){var fn=avalon.parsers[k];fn&&(val=fn.call(this,val))}return val}function updateDataEvents(dom,data){var events={};switch(data.dtype){case"radio":case"checkbox":events.click=updateDataHandle;break;case"select":events.change=updateDataHandle;break;case"contenteditable":data.isChanged?events.blur=updateDataHandle:avalon.modern?(window$1.webkitURL?events.webkitEditableContentChanged=updateDataHandle:window$1.MutationEvent&&(events.DOMCharacterDataModified=updateDataHandle),events.input=updateDataHandle):(events.keydown=updateModelKeyDown,events.paste=updateModelDelay,events.cut=updateModelDelay,events.focus=closeComposition,events.blur=openComposition);break;case"input":data.isChanged?events.change=updateDataHandle:msie<10?(events.propertychange=updateModelHack,events.paste=updateModelDelay,events.cut=updateModelDelay,events.keyup=updateModelKeyDown):(events.input=updateDataHandle,events.compositionstart=openComposition,events.compositionend=closeComposition,/\[native code\]/.test(window$1.Int8Array)||(events.keydown=updateModelKeyDown,events.paste=updateModelDelay,events.cut=updateModelDelay,window$1.netscape&&(events.DOMAutoComplete=updateDataHandle)))}/password|text/.test(dom.type)&&(events.focus=openCaret,events.blur=closeCaret,data.getCaret=getCaret,data.setCaret=setCaret);for(var name in events)avalon.bind(dom,name,events[name])}function updateModelHack(e){"value"===e.propertyName&&updateDataHandle.call(this,e)}function updateModelDelay(e){var elem=this;setTimeout(function(){updateDataHandle.call(elem,e)},0)}function openCaret(){this.caret=!0}function closeCaret(){this.caret=!1}function openComposition(){this.composing=!0}function closeComposition(e){this.composing=!1,updateModelDelay.call(this,e)}function updateModelKeyDown(e){var key=e.keyCode;91===key||15<key&&key<19||37<=key&&key<=40||updateDataHandle.call(this,e)}function setCaret(target,cursorPosition){var range$$1;target.createTextRange?mayBeAsync(function(){target.focus(),range$$1=target.createTextRange(),range$$1.collapse(!0),range$$1.moveEnd("character",cursorPosition),range$$1.moveStart("character",cursorPosition),range$$1.select()}):(target.focus(),void 0!==target.selectionStart&&target.setSelectionRange(cursorPosition,cursorPosition))}function getCaret(target){var normalizedValue,range$$1,textInputRange,len,endRange,start=0;return target.selectionStart+target.selectionEnd>-1?start=target.selectionStart:(range$$1=document$1.selection.createRange())&&range$$1.parentElement()===target&&(len=target.value.length,normalizedValue=target.value.replace(/\r\n/g,"\n"),textInputRange=target.createTextRange(),textInputRange.moveToBookmark(range$$1.getBookmark()),endRange=target.createTextRange(),endRange.collapse(!1),textInputRange.compareEndPoints("StartToEnd",endRange)>-1?start=len:(start=-textInputRange.moveStart("character",-len),start+=normalizedValue.slice(0,start).split("\n").length-1)),start}function pollValue(isIE,valueHijack$$1){var dom=this.dom;if(this.isString&&valueHijack$$1&&!isIE&&!dom.valueHijack){dom.valueHijack=updateDataHandle;var intervalID=setInterval(function(){avalon.contains(avalon.root,dom)?dom.valueHijack({type:"poll"}):clearInterval(intervalID)},30);return intervalID}}function isRegExp(value){return"regexp"===avalon.type(value)}function isCorrectDate(value){if("string"==typeof value&&value){var arr=value.split("-");if(3===arr.length&&4===arr[0].length){var year=~~arr[0],month=~~arr[1]-1,date=~~arr[2],d=new Date(year,month,date);return d.getFullYear()===year&&d.getMonth()===month&&d.getDate()===date}}return!1}function collectFeild(nodes,fields,validator){for(var vdom,i=0;vdom=nodes[i++];){var duplex=vdom.rules&&vdom.duplex;duplex?(fields.push(duplex),bindValidateEvent(duplex,validator)):vdom.children?collectFeild(vdom.children,fields,validator):Array.isArray(vdom)&&collectFeild(vdom,fields,validator)}}function bindValidateEvent(field,validator){var node=field.dom;field.validator||(field.validator=validator,!validator.validateInKeyup||field.isChanged||field.debounceTime||avalon.bind(node,"keyup",function(e){validator.validate(field,0,e)}),validator.validateInBlur&&avalon.bind(node,"blur",function(e){validator.validate(field,0,e)}),validator.resetInFocus&&avalon.bind(node,"focus",function(e){validator.onReset.call(node,e,field)}))}function getMessage(){var data=this.data||{};return this.message.replace(rformat,function(_,name){return null==data[name]?"":data[name]})}function Directive(vm,binding,vdom,render){var type=binding.type,decorator=avalon.directives[type];if(inBrowser){var dom=avalon.vdom(vdom,"toDOM");1===dom.nodeType&&dom.removeAttribute(binding.attrName),vdom.dom=dom}var callback=decorator.update?function(value){!render.mount&&/css|visible|duplex/.test(type)?render.callbacks.push(function(){decorator.update.call(directive$$1,directive$$1.node,value)}):decorator.update.call(directive$$1,directive$$1.node,value)}:avalon.noop;for(var key in decorator)binding[key]=decorator[key];binding.node=vdom;var directive$$1=new Action(vm,binding,callback);return directive$$1.init&&directive$$1.init(),directive$$1.update(),directive$$1}function parseAttributes(dirs,tuple){var node=tuple[0],uniq={},bindings=[],hasIf=!1;for(var name in dirs){var value=dirs[name],arr=name.split("-");if(name in node.props)var attrName=name;else attrName=":"+name.slice(3);eventMap[arr[1]]&&arr.splice(1,0,"on"),"on"===arr[1]&&(arr[3]=parseFloat(arr[3])||0);var type=arr[1];if("controller"!==type&&"important"!==type&&directives[type]){var binding={type:type,param:arr[2],attrName:attrName,name:arr.join("-"),expr:value,priority:directives[type].priority||100*type.charCodeAt(0)};if("if"===type&&(hasIf=!0),"on"===type&&(binding.priority+=arr[3]),!uniq[binding.name]&&(uniq[binding.name]=value,bindings.push(binding),"for"===type))return[avalon.mix(binding,tuple[3])]}}if(bindings.sort(byPriority),hasIf)for(var el,ret=[],i=0;el=bindings[i++];)if(ret.push(el),"if"===el.type)return ret;return bindings}function byPriority(a,b){return a.priority-b.priority}function parseInterpolate(dir){var str=dir.nodeValue.trim().replace(/\n\r?/g,""),tokens=[];do{var index=str.indexOf(config.openTag);index=-1===index?str.length:index;var value=str.slice(0,index);if(/\S/.test(value)&&tokens.push(avalon.quote(avalon._decode(value))),str=str.slice(index+config.openTag.length)){index=str.indexOf(config.closeTag);var value=str.slice(0,index),expr=avalon.unescapeHTML(value);if(/\|\s*\w/.test(expr)){var arr=addScope(expr,"expr");arr[1]&&(expr=arr[1].replace(rinnerValue,arr[0]+")"))}rimprovePriority&&(expr="("+expr+")"),tokens.push(expr),str=str.slice(index+config.closeTag.length)}}while(str.length);return[{expr:tokens.join("+"),name:"expr",type:"expr"}]}function getChildren(arr){for(var el,count=0,i=0;el=arr[i++];)"#document-fragment"===el.nodeName?count+=getChildren(el.children):count+=1;return count}function groupTree(parent,children){children&&children.forEach(function(vdom){if(vdom){var vlength=vdom.children&&getChildren(vdom.children);if("#document-fragment"===vdom.nodeName)var dom=createFragment();else{dom=avalon.vdom(vdom,"toDOM");var domlength=dom.childNodes&&dom.childNodes.length;domlength&&vlength&&domlength>vlength&&(appendChildMayThrowError[dom.nodeName]||avalon.clearHTML(dom))}if(vlength&&(groupTree(dom,vdom.children),"select"===vdom.nodeName)){var values=[];getSelectedValue(vdom,values),lookupOption(vdom,values)}try{appendChildMayThrowError[parent.nodeName]||parent.appendChild(dom)}catch(e){}}})}function dumpTree(elem){for(var firstChild;firstChild=elem.firstChild;)1===firstChild.nodeType&&dumpTree(firstChild),elem.removeChild(firstChild)}function getRange(childNodes,node){var end,i=childNodes.indexOf(node)+1,deep=1,nodes=[];for(nodes.start=i;node=childNodes[i++];)if(nodes.push(node),"#comment"===node.nodeName)if(startWith(node.nodeValue,"ms-for:"))deep++;else if("ms-for-end:"===node.nodeValue&&0===--deep){end=node,nodes.pop();break}return nodes.end=end,nodes}function startWith(long,short){return 0===long.indexOf(short)}function Render(node,vm,beforeReady){this.root=node,this.vm=vm,this.beforeReady=beforeReady,this.bindings=[],this.callbacks=[],this.directives=[],this.init()}function newUpdate(){var oldVal=this.beforeUpdate(),newVal=this.value=this.get();if(this.callback&&this.diff(newVal,oldVal)){this.callback(this.node,this.value);var vm=this.vm,$render=vm.$render,list=vm.$events.onViewChange;list&&$render&&$render.root&&!avalon.viewChanging&&(viewID&&(clearTimeout(viewID),viewID=null),viewID=setTimeout(function(){list.forEach(function(el){el.callback.call(vm,{type:"viewchange",target:$render.root,vmodel:vm})})}))}this._isScheduled=!1}function toObject(value){var value=platform.toJson(value);if(Array.isArray(value)){var v={};return value.forEach(function(el){el&&avalon.shadowCopy(v,el)}),v}return value}function replaceRoot(instance,innerRender){instance.innerRender=innerRender;var root$$1=innerRender.root,vdom=instance.node,slot=vdom.props.slot;for(var i in root$$1)vdom[i]=root$$1[i];vdom.props&&slot&&(vdom.props.slot=slot),innerRender.root=vdom,innerRender.vnodes[0]=vdom}function fireComponentHook(vm,vdom,name){var list=vm.$events["on"+name];list&&list.forEach(function(el){setTimeout(function(){el.callback.call(vm,{type:name.toLowerCase(),target:vdom.dom,vmodel:vm})},0)})}function createComponentVm(component,value,is){var hooks=[],defaults=component.defaults;collectHooks(defaults,hooks),collectHooks(value,hooks);var obj={};for(var i in defaults){var val=value[i];obj[i]=null==val?defaults[i]:val}obj.$id=value.id||value.$id||avalon.makeHashCode(is),delete obj.id;var def=avalon.mix(!0,{},obj),vm=avalon.define(def);return hooks.forEach(function(el){vm.$watch(el.type,el.cb)}),vm}function collectHooks(a,list){for(var i in a)componentEvents[i]&&"function"==typeof a[i]&&0===i.indexOf("on")&&list.unshift({type:i,cb:a[i]})}function resetParentChildren(nodes,arr){var dir=arr&&arr[0]&&arr[0].forDir;dir&&(dir.parentChildren=nodes)}function insertArraySlot(nodes,arr){for(var el,i=0;el=nodes[i];i++){if("slot"===el.nodeName){resetParentChildren(nodes,arr),nodes.splice.apply(nodes,[i,1].concat(arr));break}el.children&&insertArraySlot(el.children,arr)}}function insertObjectSlot(nodes,obj){for(var el,i=0;el=nodes[i];i++)if("slot"!==el.nodeName)el.children&&insertObjectSlot(el.children,obj);else{var name=el.props.name;resetParentChildren(nodes,obj[name]),nodes.splice.apply(nodes,[i,1].concat(obj[name]))}}function addToQueue(name,component){avalon.components[name]=component;for(var el,i=0;el=componentQueue[i];i++)el.is===name&&(componentQueue.splice(i,1),el.reInit=!0,delete el.value,el.update(),i--);return component}function componentExtend(child){var name=child.displayName;delete child.displayName;var obj={defaults:avalon.mix(!0,{},this.defaults,child.defaults)};return child.soleSlot&&(obj.soleSlot=child.soleSlot),obj.template=child.template||this.template,avalon.component(name,obj)}var win="object"==typeof window?window:"object"==typeof global?global:{},inBrowser=!!win.location&&win.navigator,document$1=inBrowser?win.document:{createElement:Object,createElementNS:Object,documentElement:"xx",contains:Boolean},root=inBrowser?document$1.documentElement:{outerHTML:"x"},versions={objectobject:7,objectundefined:6,undefinedfunction:NaN,undefinedobject:NaN},msie=document$1.documentMode||versions[typeof document$1.all+typeof XMLHttpRequest],modern=/NaN|undefined/.test(msie)||msie>8;Cache.prototype={put:function(key,value){var entry={key:key,value:value};return this._keymap[key]=entry,this.tail?(this.tail.newer=entry,entry.older=this.tail):this.head=entry,this.tail=entry,this.size===this.limit?this.shift():this.size++,value},shift:function(){var entry=this.head;entry&&(this.head=this.head.newer,this.head.older=entry.newer=entry.older=this._keymap[entry.key]=void 0,delete this._keymap[entry.key],this.size--)},get:function(key){var entry=this._keymap[key];if(void 0!==entry)return entry===this.tail?entry.value:(entry.newer&&(entry===this.head&&(this.head=entry.newer),entry.newer.older=entry.older),entry.older&&(entry.older.newer=entry.newer),entry.newer=void 0,entry.older=this.tail,this.tail&&(this.tail.newer=entry),this.tail=entry,entry.value)}};var delayCompile={},directives={},window$1=win;avalon.init=function(el){this[0]=this.element=el},avalon.fn=avalon.prototype=avalon.init.prototype;var rword=/[^, ]+/g,platform={},op=Object.prototype,inspect=op.toString,ohasOwn=op.hasOwnProperty,ap=Array.prototype,hasConsole="object"==typeof console;avalon.config={debug:!0};var rhyphen=/([a-z\d])([A-Z]+)/g,rcamelize=/[-_][^-_]/g,_slice=ap.slice,rhashcode=/\d\.\d{4}/,UUID=1,rescape=/[-.*+?^${}()|[\]\/\\]/g,eventHooks={},eventListeners={},validators={},cssHooks={};window$1.avalon=avalon;var rentities=/&[a-z0-9#]{2,10};/,temp=document$1.createElement("div");shadowCopy(avalon,{Array:{merge:function(target,other){target.push.apply(target,other)},ensure:function(target,item){if(-1===target.indexOf(item))return target.push(item)},removeAt:function(target,index){return!!target.splice(index,1).length},remove:function(target,item){var index=target.indexOf(item);return!!~index&&avalon.Array.removeAt(target,index)}},evaluatorPool:new Cache(888),parsers:{number:function(a){return""===a?"":parseFloat(a)||0},string:function(a){return null===a||void 0===a?"":a+""},"boolean":function(a){return""===a?a:"true"===a||"1"===a}},_decode:function(str){return rentities.test(str)?(temp.innerHTML=str,temp.innerText||temp.textContent):str}});var plugins={interpolate:function(array){var openTag=array[0],closeTag=array[1];if(openTag===closeTag)throw new SyntaxError("interpolate openTag cannot equal to closeTag");if(/[<>]/.test(openTag+"test"+closeTag))throw new SyntaxError('interpolate cannot contains "<" or ">"');config.openTag=openTag,config.closeTag=closeTag;var o=escapeRegExp(openTag),c=escapeRegExp(closeTag);config.rtext=new RegExp(o+"(.+?)"+c,"g"),config.rexpr=new RegExp(o+"([\\s\\S]*)"+c)}};if(config.plugins=plugins,config({interpolate:["{{","}}"],debug:!0}),shadowCopy(avalon,{shadowCopy:shadowCopy,oneObject:oneObject,inspect:inspect,ohasOwn:ohasOwn,rword:rword,version:"2.2.5",vmodels:{},directives:directives,directive:directive,eventHooks:eventHooks,eventListeners:eventListeners,validators:validators,cssHooks:cssHooks,log:log,noop:noop,warn:warn,error:error,config:config,modern:modern,msie:msie,root:root,document:document$1,window:window$1,inBrowser:inBrowser,isObject:isObject,range:range,slice:slice,hyphen:hyphen,camelize:camelize,escapeRegExp:escapeRegExp,quote:quote,makeHashCode:makeHashCode}),!isNative("司徒正美".trim)){String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}Object.create||(Object.create=function(){function F(){}return function(o){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return F.prototype=o,new F}}());var hasDontEnumBug=!{toString:null}.propertyIsEnumerable("toString"),hasProtoEnumBug=function(){}.propertyIsEnumerable("prototype"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;isNative(Object.keys)||(Object.keys=function(object){var theKeys=[],skipProto=hasProtoEnumBug&&"function"==typeof object;if("string"==typeof object||object&&object.callee)for(var i=0;i<object.length;++i)theKeys.push(String(i));else for(var name in object)skipProto&&"prototype"===name||!ohasOwn.call(object,name)||theKeys.push(String(name));if(hasDontEnumBug)for(var ctor=object.constructor,skipConstructor=ctor&&ctor.prototype===object,j=0;j<dontEnumsLength;j++){var dontEnum=dontEnums[j];skipConstructor&&"constructor"===dontEnum||!ohasOwn.call(object,dontEnum)||theKeys.push(dontEnum)}return theKeys}),isNative(Array.isArray)||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),isNative(isNative.bind)||(Function.prototype.bind=function(scope){if(arguments.length<2&&void 0===scope)return this;var fn=this,argv=arguments;return function(){var i,args=[];for(i=1;i<argv.length;i++)args.push(argv[i]);for(i=0;i<arguments.length;i++)args.push(arguments[i]);return fn.apply(scope,args)}});try{_slice.call(avalon.document.documentElement)}catch(e){ap.slice=function(begin,end){if(end=void 0!==end?end:this.length,Array.isArray(this))return _slice.call(this,begin,end);var i,size,cloned=[],len=this.length,start=begin||0;start=start>=0?start:len+start;var upTo=end||len;if(end<0&&(upTo=len+end),(size=upTo-start)>0)if(cloned=new Array(size),this.charAt)for(i=0;i<size;i++)cloned[i]=this.charAt(start+i);else for(i=0;i<size;i++)cloned[i]=this[start+i];return cloned}}isNative(ap.map)||avalon.shadowCopy(ap,{indexOf:function(item,index){var n=this.length,i=~~index;for(i<0&&(i+=n);i<n;i++)if(this[i]===item)return i;return-1},lastIndexOf:function(item,index){var n=this.length,i=null==index?n-1:index;for(i<0&&(i=Math.max(0,n+i));i>=0;i--)if(this[i]===item)return i;return-1},forEach:iterator("","_",""),filter:iterator("r=[],j=0,","if(_)r[j++]=this[i]","return r"),map:iterator("r=[],","r[i]=_","return r"),some:iterator("","if(_)return true","return false"),every:iterator("","if(!_)return false","return true")});var compaceQuote=function(){var Escapes={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},toPaddedString=function(width,value){return("000000"+(value||0)).slice(-width)},escapeChar=function(character){var charCode=character.charCodeAt(0),escaped=Escapes[charCode];return escaped||"\\u00"+toPaddedString(2,charCode.toString(16))},reEscape=/[\x00-\x1f\x22\x5c]/g;return function(value){return reEscape.lastIndex=0,'"'+(reEscape.test(value)?String(value).replace(reEscape,escapeChar):value)+'"'}}();try{avalon._quote=JSON.stringify}catch(e){avalon._quote=compaceQuote}var class2type={};"Boolean Number String Function Array Date RegExp Object Error".replace(avalon.rword,function(name){class2type["[object "+name+"]"]=name.toLowerCase()}),avalon.type=function(obj){return null==obj?String(obj):"object"==typeof obj||"function"==typeof obj?class2type[inspect.call(obj)]||"object":typeof obj};var rfunction=/^\s*\bfunction\b/;avalon.isFunction="object"==typeof alert?function(fn){try{return rfunction.test(fn+"")}catch(e){return!1}}:function(fn){return"[object Function]"===inspect.call(fn)};var rwindow=/^\[object (?:Window|DOMWindow|global)\]$/;avalon.isWindow=isWindowModern(avalon.window)?isWindowModern:isWindowCompact;var enu,enumerateBUG;for(enu in avalon({}))break;enumerateBUG="0"!==enu,avalon.isPlainObject=/\[native code\]/.test(Object.getPrototypeOf)?isPlainObjectModern:isPlainObjectCompact;var rcanMix=/object|function/;avalon.mix=avalon.fn.mix=function(){var n=arguments.length,isDeep=!1,i=0,array=[];for(!0===arguments[0]&&(isDeep=!0,i=1);i<n;i++){var el=arguments[i];el=el&&rcanMix.test(typeof el)?el:{},array.push(el)}return 1===array.length&&array.unshift(this),innerExtend(isDeep,array)};var undefined$1,rarraylike=/(Array|List|Collection|Map|Arguments)\]$/;avalon.each=function(obj,fn){if(obj){var i=0;if(isArrayLike(obj))for(var n=obj.length;i<n&&!1!==fn(i,obj[i]);i++);else for(i in obj)if(obj.hasOwnProperty(i)&&!1===fn(i,obj[i]))break}},function(){var welcomeIntro=["%cavalon.js %c"+avalon.version+" %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"];if("object"==typeof console){var con=console,method=con.groupCollapsed||con.log;Function.apply.call(method,con,welcomeIntro),con.log("You're running avalon in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n\n  avalon.config({debug: false});\n\nDebug mode also automatically shut down amicably when your app is minified.\n\nGet help and support:\n  https://segmentfault.com/t/avalon\n  http://avalonjs.coding.me/\n  http://www.baidu-x.com/?q=avalonjs\n  http://www.avalon.org.cn/\n\nFound a bug? Raise an issue:\n  https://github.com/RubyLouvre/avalon/issues\n\n"),method!==console.log&&con.groupEnd(welcomeIntro)}}();var rscripts=/<script[^>]*>([\S\s]*?)<\/script\s*>/gim,ron=/\s+(on[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,ropen=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/gi,rsanitize={a:/\b(href)\=("javascript[^"]*"|'javascript[^']*')/gi,img:/\b(src)\=("javascript[^"]*"|'javascript[^']*')/gi,form:/\b(action)\=("javascript[^"]*"|'javascript[^']*')/gi},DATE_FORMATS={yyyy:dateGetter("FullYear",4),yy:dateGetter("FullYear",2,0,!0),y:dateGetter("FullYear",1),MMMM:dateStrGetter("Month"),MMM:dateStrGetter("Month",!0),MM:dateGetter("Month",2,1),M:dateGetter("Month",1,1),dd:dateGetter("Date",2),d:dateGetter("Date",1),HH:dateGetter("Hours",2),H:dateGetter("Hours",1),hh:dateGetter("Hours",2,-12),h:dateGetter("Hours",1,-12),mm:dateGetter("Minutes",2),m:dateGetter("Minutes",1),ss:dateGetter("Seconds",2),s:dateGetter("Seconds",1),sss:dateGetter("Milliseconds",3),EEEE:dateStrGetter("Day"),EEE:dateStrGetter("Day",!0),a:ampmGetter,Z:timeZoneGetter},rdateFormat=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,raspnetjson=/^\/Date\((\d+)\)\/$/,locate={AMPMS:{0:"上午",1:"下午"},DAY:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},MONTH:{0:"1月",1:"2月",2:"3月",3:"4月",4:"5月",5:"6月",6:"7月",7:"8月",8:"9月",9:"10月",10:"11月",11:"12月"},SHORTDAY:{0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"},fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"yyyy-M-d H:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"H:mm:ss","short":"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"};locate.SHORTMONTH=locate.MONTH,dateFilter.locate=locate;var $$skipArray={$id:void 0,$render:void 0,$track:void 0,$element:void 0,$computed:void 0,$watch:void 0,$fire:void 0,$events:void 0,$accessors:void 0,$hashcode:void 0,$mutations:void 0,$vbthis:void 0,$vbsetter:void 0},eventFilters={stop:function(e){return e.stopPropagation(),e},prevent:function(e){return e.preventDefault(),e}},keys={esc:27,tab:9,enter:13,space:32,del:46,up:38,left:37,right:39,down:40};for(var name$1 in keys)!function(filter,key){eventFilters[filter]=function(e){return e.which!==key&&(e.$return=!0),e}}(name$1,keys[name$1]);var filters=avalon.filters={};avalon.composeFilters=function(){var args=arguments;return function(value){for(var arr,i=0;arr=args[i++];){var name=arr[0],filter=avalon.filters[name];if("function"==typeof filter){arr[0]=value;try{value=filter.apply(0,arr)}catch(e){}}}return value}},avalon.escapeHtml=escapeFilter,avalon.mix(filters,{uppercase:function(str){return String(str).toUpperCase()},lowercase:function(str){return String(str).toLowerCase()},truncate:function(str,length,end){return str?(str=String(str),isNaN(length)&&(length=30),end="string"==typeof end?end:"...",str.length>length?str.slice(0,length-end.length)+end:str):""},camelize:avalon.camelize,date:dateFilter,escape:escapeFilter,sanitize:sanitizeFilter,number:numberFilter,currency:function(amount,symbol,fractionSize){return(symbol||"¥")+numberFilter(amount,isFinite(fractionSize)?fractionSize:2)}},{filterBy:filterBy,orderBy:orderBy,selectBy:selectBy,limitBy:limitBy},eventFilters);var rcheckedType=/^(?:checkbox|radio)$/;avalon.contains=fixContains,avalon.cloneNode=function(a){return a.cloneNode(!0)},inBrowser&&function(){function fixFF(prop,cb){prop in root||!HTMLElement.prototype.__defineGetter__||HTMLElement.prototype.__defineGetter__(prop,cb)}msie<10&&(avalon.cloneNode=fixClone),document$1.contains||(document$1.contains=function(b){return fixContains(document$1,b)}),avalon.modern&&(document$1.createTextNode("x").contains||(Node.prototype.contains=function(child){return fixContains(this,child)})),fixFF("outerHTML",function(){var div=document$1.createElement("div");return div.appendChild(this),div.innerHTML}),fixFF("children",function(){for(var el,children=[],i=0;el=this.childNodes[i++];)1===el.nodeType&&children.push(el);return children}),fixFF("innerText",function(){return this.textContent})}(),ClassList.prototype={toString:function(){var node=this.node,cls=node.className,str="string"==typeof cls?cls:cls.baseVal,match=str.match(/\S+/g);return match?match.join(" "):""},contains:function(cls){return(" "+this+" ").indexOf(" "+cls+" ")>-1},add:function(cls){this.contains(cls)||this.set(this+" "+cls)},remove:function(cls){this.set((" "+this+" ").replace(" "+cls+" "," "))},set:function(cls){cls=cls.trim();var node=this.node;"object"==typeof node.className?node.setAttribute("class",cls):node.className=cls,cls||node.removeAttribute("class")}},"add,remove".replace(rword,function(method){avalon.fn[method+"Class"]=function(cls){var el=this[0]||{};return cls&&"string"==typeof cls&&1===el.nodeType&&cls.replace(/\S+/g,function(c){classListFactory(el)[method](c)}),this}}),avalon.shadowCopy(avalon.fn,{hasClass:function(cls){var el=this[0]||{};return 1===el.nodeType&&classListFactory(el).contains(cls)},toggleClass:function(value,stateVal){var isBool="boolean"==typeof stateVal,me=this;return String(value).replace(/\S+/g,function(c){var state=isBool?stateVal:!me.hasClass(c);me[state?"addClass":"removeClass"](c)}),this}});var propMap={};"accept-charset,acceptCharset|char,ch|charoff,chOff|class,className|for,htmlFor|http-equiv,httpEquiv".replace(/[^\|]+/g,function(a){var k=a.split(",");propMap[k[0]]=k[1]}),["autofocus,autoplay,async,allowTransparency,checked,controls","declare,disabled,defer,defaultChecked,defaultSelected,","isMap,loop,multiple,noHref,noResize,noShade","open,readOnly,selected"].join(",").replace(/\w+/g,function(name){propMap[name.toLowerCase()]=name}),["accessKey,bgColor,cellPadding,cellSpacing,codeBase,codeType,colSpan","dateTime,defaultValue,contentEditable,frameBorder,longDesc,maxLength,marginWidth,marginHeight,rowSpan,tabIndex,useMap,vSpace,valueType,vAlign"].join(",").replace(/\w+/g,function(name){propMap[name.toLowerCase()]=name});var rvalidchars=/^[\],:{}\s]*$/,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rvalidescape=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,rvalidtokens=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,rsvg=/^\[object SVG\w*Element\]$/,ramp=/&amp;/g,innateMap={};try{avalon.parseJSON=JSON.parse}catch(e){avalon.parseJSON=compactParseJSON}avalon.fn.attr=function(name,value){return 2===arguments.length?(this[0].setAttribute(name,value),this):this[0].getAttribute(name)};var cssMap=oneObject("float","cssFloat");avalon.cssNumber=oneObject("animationIterationCount,columnCount,order,flex,flexGrow,flexShrink,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom");var prefixes=["","-webkit-","-o-","-moz-","-ms-"];avalon.cssName=function(name,host,camelCase){if(cssMap[name])return cssMap[name];host=host||avalon.root.style||{};for(var i=0,n=prefixes.length;i<n;i++)if((camelCase=avalon.camelize(prefixes[i]+name))in host)return cssMap[name]=camelCase;return null},avalon.css=function(node,name,value,fn){if(node instanceof avalon&&(node=node[0]),1===node.nodeType){var prop=avalon.camelize(name);if(name=avalon.cssName(prop)||prop,void 0===value||"boolean"==typeof value){fn=cssHooks[prop+":get"]||cssHooks["@:get"],"background"===name&&(name="backgroundColor");var val=fn(node,name);return!0===value?parseFloat(val)||0:val}if(""===value)node.style[name]="";else{if(null==value||value!==value)return;isFinite(value)&&!avalon.cssNumber[prop]&&(value+="px"),fn=cssHooks[prop+":set"]||cssHooks["@:set"],fn(node,name,value)}}},avalon.fn.css=function(name,value){if(avalon.isPlainObject(name))for(var i in name)avalon.css(this,i,name[i]);else var ret=avalon.css(this,name,value);return void 0!==ret?ret:this},avalon.fn.position=function(){var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};return elem?("fixed"===this.css("position")?offset=elem.getBoundingClientRect():(offsetParent=this.offsetParent(),offset=this.offset(),"HTML"!==offsetParent[0].tagName&&(parentOffset=offsetParent.offset()),parentOffset.top+=avalon.css(offsetParent[0],"borderTopWidth",!0),parentOffset.left+=avalon.css(offsetParent[0],"borderLeftWidth",!0),parentOffset.top-=offsetParent.scrollTop(),parentOffset.left-=offsetParent.scrollLeft()),{top:offset.top-parentOffset.top-avalon.css(elem,"marginTop",!0),left:offset.left-parentOffset.left-avalon.css(elem,"marginLeft",!0)}):parentOffset},avalon.fn.offsetParent=function(){for(var offsetParent=this[0].offsetParent;offsetParent&&"static"===avalon.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return avalon(offsetParent||avalon.root)},cssHooks["@:set"]=function(node,name,value){try{node.style[name]=value}catch(e){}},cssHooks["@:get"]=function(node,name){if(!node||!node.style)throw new Error("getComputedStyle要求传入一个节点 "+node);var ret,styles=window$1.getComputedStyle(node,null);return styles&&""===(ret="filter"===name?styles.getPropertyValue(name):styles[name])&&(ret=node.style[name]),ret},cssHooks["opacity:get"]=function(node){var ret=cssHooks["@:get"](node,"opacity");return""===ret?"1":ret},"top,left".replace(avalon.rword,function(name){cssHooks[name+":get"]=function(node){var computed=cssHooks["@:get"](node,name);return/px$/.test(computed)?computed:avalon(node).position()[name]+"px"}});var cssShow={position:"absolute",visibility:"hidden",display:"block"},rdisplayswap=/^(none|table(?!-c[ea]).+)/;if(avalon.each({Width:"width",Height:"height"},function(name,method){var clientProp="client"+name,scrollProp="scroll"+name,offsetProp="offset"+name;cssHooks[method+":get"]=function(node,which,override){var boxSizing=-4;"number"==typeof override&&(boxSizing=override),which="Width"===name?["Left","Right"]:["Top","Bottom"];var ret=node[offsetProp];return 2===boxSizing?ret+avalon.css(node,"margin"+which[0],!0)+avalon.css(node,"margin"+which[1],!0):(boxSizing<0&&(ret=ret-avalon.css(node,"border"+which[0]+"Width",!0)-avalon.css(node,"border"+which[1]+"Width",!0)),-4===boxSizing&&(ret=ret-avalon.css(node,"padding"+which[0],!0)-avalon.css(node,"padding"+which[1],!0)),ret)},cssHooks[method+"&get"]=function(node){var hidden=[];showHidden(node,hidden);for(var obj,val=cssHooks[method+":get"](node),i=0;obj=hidden[i++];){node=obj.node;for(var n in obj)"string"==typeof obj[n]&&(node.style[n]=obj[n])}return val},avalon.fn[method]=function(value){var node=this[0];if(0===arguments.length){if(node.setTimeout)return node["inner"+name]||node.document.documentElement[clientProp]||node.document.body[clientProp];if(9===node.nodeType){var doc=node.documentElement;return Math.max(node.body[scrollProp],doc[scrollProp],node.body[offsetProp],doc[offsetProp],doc[clientProp])}return cssHooks[method+"&get"](node)}return this.css(method,value)},avalon.fn["inner"+name]=function(){return cssHooks[method+":get"](this[0],void 0,-2)},avalon.fn["outer"+name]=function(includeMargin){return cssHooks[method+":get"](this[0],void 0,!0===includeMargin?2:0)}}),msie<9){avalon.shadowCopy(cssMap,oneObject("float","styleFloat"));var rnumnonpx=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,rposition=/^(top|right|bottom|left)$/,ralpha=/alpha\([^)]+\)/i,ie8=8===msie,border={thin:ie8?"1px":"2px",medium:ie8?"3px":"4px",thick:ie8?"5px":"6px"};cssHooks["@:get"]=function(node,name){var currentStyle=node.currentStyle,ret=currentStyle[name];if(rnumnonpx.test(ret)&&!rposition.test(ret)){var style=node.style,left=style.left,rsLeft=node.runtimeStyle.left;node.runtimeStyle.left=currentStyle.left,style.left="fontSize"===name?"1em":ret||0,ret=style.pixelLeft+"px",style.left=left,node.runtimeStyle.left=rsLeft}return"medium"===ret&&(name=name.replace("Width","Style"),"none"===currentStyle[name]&&(ret="0px")),""===ret?"auto":border[ret]||ret},cssHooks["opacity:set"]=function(node,name,value){var style=node.style,opacity=Number(value)<=1?"alpha(opacity="+100*value+")":"",filter=style.filter||"";style.zoom=1,style.filter=(ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity).trim(),style.filter||style.removeAttribute("filter")},cssHooks["opacity:get"]=function(node){for(var el,match=node.style.filter.match(/(opacity|\d(\d|\.)*)/g)||[],ret=!1,i=0;el=match[i++];)if("opacity"===el)ret=!0;else if(ret)return el/100+"";return"1"}}avalon.fn.offset=function(){var node=this[0],box={left:0,top:0};if(!node||!node.tagName||!node.ownerDocument)return box;var doc=node.ownerDocument,body=doc.body,root$$1=doc.documentElement,win=doc.defaultView||doc.parentWindow;if(!avalon.contains(root$$1,node))return box;node.getBoundingClientRect&&(box=node.getBoundingClientRect());var clientTop=root$$1.clientTop||body.clientTop,clientLeft=root$$1.clientLeft||body.clientLeft,scrollTop=Math.max(win.pageYOffset||0,root$$1.scrollTop,body.scrollTop),scrollLeft=Math.max(win.pageXOffset||0,root$$1.scrollLeft,body.scrollLeft);return{top:box.top+scrollTop-clientTop,left:box.left+scrollLeft-clientLeft}},avalon.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){avalon.fn[method]=function(val){var node=this[0]||{},win=getWindow(node),root$$1=avalon.root,top="scrollTop"===method;if(!arguments.length)return win?prop in win?win[prop]:root$$1[method]:node[method];win?win.scrollTo(top?avalon(win).scrollLeft():val,top?val:avalon(win).scrollTop()):node[method]=val}});var valHooks={"option:get":msie?getOption:function(node){return node.value},"select:get":function(node,value){for(var option,options=node.options,index=node.selectedIndex,getter=valHooks["option:get"],one="select-one"===node.type||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;i<max;i++)if(option=options[i],(option.selected||i===index)&&!option.disabled&&(!option.parentNode.disabled||"OPTGROUP"!==option.parentNode.tagName)){if(value=getter(option),one)return value;values.push(value)}return values},"select:set":function(node,values,optionSet){values=[].concat(values);for(var el,getter=valHooks["option:get"],i=0;el=node.options[i++];)(el.selected=values.indexOf(getter(el))>-1)&&(optionSet=!0);optionSet||(node.selectedIndex=-1)}};avalon.fn.val=function(value){var node=this[0];if(node&&1===node.nodeType){var get=0===arguments.length,access=get?":get":":set",fn=valHooks[getDuplexType(node)+access];if(fn)var val=fn(node,value);else{if(get)return(node.value||"").replace(/\r/g,"");node.value=value}}return get?val:this};var stringNum=0,stringPool={map:{}},rfill=/\?\?\d+/g,voidTag={area:1,base:1,basefont:1,bgsound:1,br:1,col:1,command:1,embed:1,frame:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},orphanTag={script:1,style:1,textarea:1,xmp:1,noscript:1,template:1},rtrimHTML=/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,pNestChild=oneObject("div,ul,ol,dl,table,h1,h2,h3,h4,h5,h6,form,fieldset"),tNestChild=makeObject("tr,style,script"),nestObject={p:pNestChild,select:makeObject("option,optgroup,#text"),optgroup:makeObject("option,#text"),option:makeObject("#text"),tr:makeObject("th,td,style,script"),tbody:tNestChild,tfoot:tNestChild,thead:tNestChild,colgroup:makeObject("col"),head:makeObject("base,basefont,bgsound,link,style,script,meta,title,noscript,noframes"),html:oneObject("head,body")},rtagStart=/[\!\/a-z]/i,rattrs=/([^=\s]+)(?:\s*=\s*(\S+))?/,rcontent=/\S/;avalon.lexer=fromString;var strCache=new Cache(100);AST.prototype={init:function(str){this.ret=[];var stack=[];stack.last=function(){return stack[stack.length-1]},this.stack=stack,this.str=str},gen:function(){var breakIndex=999999;do{this.tryGenText(),this.tryGenComment(),this.tryGenOpenTag(),this.tryGenCloseTag();var node=this.node;if(this.node=0,!node||0==--breakIndex)break;node.end&&("table"===node.nodeName&&makeTbody(node.children),delete node.end)}while(this.str.length);return this.ret},fixPos:function(str,i){for(var tryCount=str.length-i;tryCount--&&!rtagStart.test(str.charAt(i+1));)i=str.indexOf("<",i+1);return 0===tryCount&&(i=str.length),i},tryGenText:function(){var str=this.str;if("<"!==str.charAt(0)){var i=str.indexOf("<");-1===i?i=str.length:rtagStart.test(str.charAt(i+1))||(i=this.fixPos(str,i));var nodeValue=str.slice(0,i).replace(rfill,fill);this.str=str.slice(i),this.node={nodeName:"#text",nodeValue:nodeValue},rcontent.test(nodeValue)&&this.tryGenChildren()}},tryGenComment:function(){if(!this.node){var str=this.str;if(0===str.indexOf("\x3c!--")){var l=str.indexOf("--\x3e");-1===l&&avalon.error("注释节点没有闭合"+str);var nodeValue=str.slice(4,l).replace(rfill,fill);this.str=str.slice(l+3),this.node={nodeName:"#comment",nodeValue:nodeValue},this.tryGenChildren()}}},tryGenOpenTag:function(){if(!this.node){var str=this.str,match=str.match(/^<([-A-Za-z0-9_]+)\s*([^>]*?)(\/?)>/);if(match){var nodeName=match[1],props={};/^[A-Z]/.test(nodeName)&&avalon.components[nodeName]&&(props.is=nodeName),nodeName=nodeName.toLowerCase();var isVoidTag=!!voidTag[nodeName]||"/"===match[3],node=this.node={nodeName:nodeName,props:{},children:[],isVoidTag:isVoidTag},attrs=match[2];if(attrs&&this.genProps(attrs,node.props),this.tryGenChildren(),str=str.slice(match[0].length),isVoidTag)node.end=!0;else if(this.stack.push(node),orphanTag[nodeName]||"option"===nodeName){var index=str.indexOf("</"+nodeName+">"),innerHTML=str.slice(0,index).trim();str=str.slice(index),makeOrphan(node,nodeName,nomalString(innerHTML))}this.str=str}}},tryGenCloseTag:function(){if(!this.node){var str=this.str,match=str.match(/^<\/([^>]+)>/);if(match){var nodeName=match[1].toLowerCase(),last=this.stack.last();if(last){if(last.nodeName!==nodeName){var errMsg=last.nodeName+"没有闭合,请注意属性的引号";avalon.warn(errMsg),avalon.error(errMsg)}}else avalon.error(match[0]+"前面缺少<"+nodeName+">");var node=this.stack.pop();node.end=!0,this.node=node,this.str=str.slice(match[0].length)}}},tryGenChildren:function(){var node=this.node,p=this.stack.last();p?(validateDOMNesting(p,node),p.children.push(node)):this.ret.push(node)},genProps:function(attrs,props){for(;attrs;){var arr=rattrs.exec(attrs);if(!arr)break;var name=arr[1],value=arr[2]||"";attrs=attrs.replace(arr[0],""),value&&0===value.indexOf("??")&&(value=nomalString(value).replace(/\\n\s*/g,"").slice(1,-1)),name in props||(props[name]=value)}}};var vdomAst=new AST,rhtml=/<|&#?\w+;/,htmlCache=new Cache(128);avalon.parseHTML=function(html){var fragment=createFragment();if("string"!=typeof html)return fragment;if(!rhtml.test(html))return document$1.createTextNode(html);html=html.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,"<$1></$2>").trim();var hasCache=htmlCache.get(html);if(hasCache)return avalon.cloneNode(hasCache);for(var el,vnodes=fromString(html),i=0;el=vnodes[i++];){var child=avalon.vdom(el,"toDOM");fragment.appendChild(child)}return html.length<1024&&htmlCache.put(html,fragment),fragment},avalon.innerHTML=function(node,html){var parsed=avalon.parseHTML(html);this.clearHTML(node),node.appendChild(parsed)},avalon.unescapeHTML=function(html){return String(html).replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},avalon.clearHTML=function(node){for(;node.lastChild;)node.removeChild(node.lastChild);return node};var canBubbleUp={click:!0,dblclick:!0,keydown:!0,keypress:!0,keyup:!0,mousedown:!0,mousemove:!0,mouseup:!0,mouseover:!0,mouseout:!0,wheel:!0,mousewheel:!0,input:!0,change:!0,beforeinput:!0,compositionstart:!0,compositionupdate:!0,compositionend:!0,select:!0,cut:!0,copy:!0,paste:!0,beforecut:!0,beforecopy:!0,beforepaste:!0,focusin:!0,focusout:!0,DOMFocusIn:!0,DOMFocusOut:!0,DOMActivate:!0,dragend:!0,datasetchanged:!0},hackSafari=avalon.modern&&document$1.ontouchstart;avalon.fn.bind=function(type,fn,phase){if(this[0])return avalon.bind(this[0],type,fn,phase)},avalon.fn.unbind=function(type,fn,phase){if(this[0]){var args=_slice.call(arguments);args.unshift(this[0]),avalon.unbind.apply(0,args)}return this},avalon.bind=function(elem,type,fn){if(1===elem.nodeType){var value=elem.getAttribute("avalon-events")||"",uuid=getShortID(fn),hook=eventHooks[type];"click"===type&&hackSafari&&elem.addEventListener("click",avalon.noop),hook&&(type=hook.type||type,hook.fix&&(fn=hook.fix(elem,fn),fn.uuid=uuid));var key=type+":"+uuid;avalon.eventListeners[fn.uuid]=fn,-1===value.indexOf(type+":")&&(canBubbleUp[type]||avalon.modern&&focusBlur[type]?delegateEvent(type):avalon._nativeBind(elem,type,dispatch));var keys=value.split(",");return""===keys[0]&&keys.shift(),-1===keys.indexOf(key)&&(keys.push(key),setEventId(elem,keys.join(","))),fn}var cb=function(e){fn.call(elem,new avEvent(e))};return avalon._nativeBind(elem,type,cb),cb},avalon.unbind=function(elem,type,fn){if(1===elem.nodeType){var value=elem.getAttribute("avalon-events")||"";switch(arguments.length){case 1:avalon._nativeUnBind(elem,type,dispatch),elem.removeAttribute("avalon-events");break;case 2:value=value.split(",").filter(function(str){return-1===str.indexOf(type+":")}).join(","),setEventId(elem,value);break;default:var search=type+":"+fn.uuid;value=value.split(",").filter(function(str){return str!==search}).join(","),setEventId(elem,value),delete avalon.eventListeners[fn.uuid]}}else avalon._nativeUnBind(elem,type,fn)};var typeRegExp={},rhandleHasVm=/^e/,focusBlur={focus:!0,blur:!0},eventProto={webkitMovementY:1,webkitMovementX:1,keyLocation:1,fixEvent:function(){},preventDefault:function(){var e=this.originalEvent||{};e.returnValue=this.returnValue=!1,modern&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent||{};e.cancelBubble=this.cancelBubble=!0,modern&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.stopPropagation(),this.stopImmediate=!0},toString:function(){return"[object Event]"}};if(avEvent.prototype=eventProto,"onmouseenter"in root||avalon.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(origType,fixType){eventHooks[origType]={type:fixType,fix:function(elem,fn){return function(e){var t=e.relatedTarget;if(!t||t!==elem&&!(16&elem.compareDocumentPosition(t)))return delete e.type,e.type=origType,fn.apply(this,arguments)}}}}),avalon.each({AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"},function(construct,fixType){window$1[construct]&&!eventHooks.animationend&&(eventHooks.animationend={type:fixType})}),!("onmousewheel"in document$1)){var fixWheelType=void 0!==document$1.onwheel?"wheel":"DOMMouseScroll",fixWheelDelta="wheel"===fixWheelType?"deltaY":"detail";eventHooks.mousewheel={type:fixWheelType,fix:function(elem,fn){return function(e){var delta=e[fixWheelDelta]>0?-120:120;return e.wheelDelta=~~elem._ms_wheel_+delta,elem._ms_wheel_=e.wheelDeltaY=e.wheelDelta,e.wheelDeltaX=0,Object.defineProperty&&Object.defineProperty(e,"type",{value:"mousewheel"}),fn.apply(this,arguments)}}}}modern||(delete canBubbleUp.change,delete canBubbleUp.select),avalon._nativeBind=modern?function(el,type,fn,capture){el.addEventListener(type,fn,!!capture)}:function(el,type,fn){el.attachEvent("on"+type,fn)},avalon._nativeUnBind=modern?function(el,type,fn,a){el.removeEventListener(type,fn,!!a)}:function(el,type,fn){el.detachEvent("on"+type,fn)},avalon.fireDom=function(elem,type,opts){if(document$1.createEvent){var hackEvent=document$1.createEvent("Events");hackEvent.initEvent(type,!0,!0,opts),avalon.shadowCopy(hackEvent,opts),elem.dispatchEvent(hackEvent)}else if(root.contains(elem)){hackEvent=document$1.createEventObject(),opts&&avalon.shadowCopy(hackEvent,opts);try{elem.fireEvent("on"+type,hackEvent)}catch(e){avalon.log("fireDom",type,"args error")}}};var rmouseEvent=/^(?:mouse|contextmenu|drag)|click/;avEvent.prototype.fixEvent=function(){var event=this;if(null==event.which&&0===event.type.indexOf("key")&&(event.which=null!=event.charCode?event.charCode:event.keyCode),rmouseEvent.test(event.type)&&!("pageX"in event)){var DOC=event.target.ownerDocument||document$1,box="BackCompat"===DOC.compatMode?DOC.body:DOC.documentElement;event.pageX=event.clientX+(box.scrollLeft>>0)-(box.clientLeft>>0),event.pageY=event.clientY+(box.scrollTop>>0)-(box.clientTop>>0),event.wheelDeltaY=~~event.wheelDelta,event.wheelDeltaX=0}},"oninput"in document$1.createElement("input")||(eventHooks.input={type:"propertychange",fix:function(elem,fn){return function(e){if("value"===e.propertyName)return e.type="input",fn.apply(this,arguments)}}});var readyList=[];avalon.ready=function(fn){readyList.push(fn),avalon.isReady&&fireReady()},avalon.ready(function(){avalon.scan&&avalon.scan(document$1.body)}),inBrowser&&function(){function doScrollCheck(){try{root.doScroll("left"),fireReady()}catch(e){setTimeout(doScrollCheck)}}if("complete"===document$1.readyState)setTimeout(fireReady);else if(document$1.addEventListener)document$1.addEventListener("DOMContentLoaded",fireReady,!1);else if(document$1.attachEvent){document$1.attachEvent("onreadystatechange",function(){"complete"===document$1.readyState&&fireReady()});try{var isTop=null===window$1.frameElement}catch(e){}root.doScroll&&isTop&&window$1.external&&doScrollCheck()}avalon.bind(window$1,"load",fireReady)}();var rformElement=/input|textarea|select/i;VText.prototype={constructor:VText,toDOM:function(){if(this.dom)return this.dom;var v=avalon._decode(this.nodeValue);return this.dom=document$1.createTextNode(v)},toHTML:function(){return this.nodeValue}},VComment.prototype={constructor:VComment,toDOM:function(){return this.dom?this.dom:this.dom=document$1.createComment(this.nodeValue)},toHTML:function(){return"\x3c!--"+this.nodeValue+"--\x3e"}},VElement.prototype={constructor:VElement,toDOM:function(){if(this.dom)return this.dom;var dom,tagName=this.nodeName;dom=avalon.modern&&svgTags[tagName]?createSVG(tagName):avalon.modern||!VMLTags[tagName]&&!rvml.test(tagName)?document$1.createElement(tagName):createVML(tagName);var props=this.props||{};for(var i in props){var val=props[i];skipFalseAndFunction(val)&&(specalAttrs[i]&&avalon.msie<8?specalAttrs[i](dom,val):dom.setAttribute(i,val+""))}var c=this.children||[],template=c[0]?c[0].nodeValue:"";switch(this.nodeName){case"script":dom.type="noexec",dom.text=template;try{dom.innerHTML=template}catch(e){}dom.type=props.type||"";break;case"noscript":dom.textContent=template;case"style":case"xmp":case"template":try{dom.innerHTML=template}catch(e){hackIE(dom,this.nodeName,template)}break;case"option":msie<9&&(dom.text=template);default:!this.isVoidTag&&this.children&&this.children.forEach(function(el){return c&&dom.appendChild(avalon.vdom(c,"toDOM"))})}return this.dom=dom},toHTML:function(){var arr=[],props=this.props||{};for(var i in props){skipFalseAndFunction(props[i])&&arr.push(i+"="+avalon.quote(props[i]+""))}arr=arr.length?" "+arr.join(" "):"";var str="<"+this.nodeName+arr;return this.isVoidTag?str+"/>":(str+=">",this.children&&(str+=this.children.map(function(el){return el?avalon.vdom(el,"toHTML"):""}).join("")),str+"</"+this.nodeName+">")}};var specalAttrs={"class":function(dom,val){dom.className=val},style:function(dom,val){dom.style.cssText=val},type:function(dom,val){try{dom.type=val}catch(e){}},"for":function(dom,val){dom.setAttribute("for",val),dom.htmlFor=val}},svgTags=avalon.oneObject("circle,defs,ellipse,image,line,path,polygon,polyline,rect,symbol,text,use,g,svg"),rvml=/^\w+\:\w+/,VMLTags=avalon.oneObject("shape,line,polyline,rect,roundrect,oval,arc,curve,background,image,shapetype,group,fill,stroke,shadow, extrusion, textbox, imagedata, textpath");VFragment.prototype={constructor:VFragment,toDOM:function(){if(this.dom)return this.dom;var f=this.toFragment();return this.split=f.lastChild,this.dom=f},dispose:function(){this.toFragment(),this.innerRender&&this.innerRender.dispose();for(var i in this)this[i]=null},toFragment:function(){var f=createFragment();return this.children.forEach(function(el){return f.appendChild(avalon.vdom(el,"toDOM"))}),f},toHTML:function(){return this.children.map(function(el){return avalon.vdom(el,"toHTML")}).join("")}},avalon.mix(avalon,{VText:VText,VComment:VComment,VElement:VElement,VFragment:VFragment});var constNameMap={"#text":"VText","#document-fragment":"VFragment","#comment":"VComment"};avalon.vdomAdaptor=avalon.vdom=function(obj,method){if(!obj)return"toHTML"===method?"":createFragment();var nodeName=obj.nodeName;return nodeName?avalon[constNameMap[nodeName]||"VElement"].prototype[method].call(obj):new avalon.VFragment(obj)[method]()};avalon.domize=function(a){return avalon.vdom(a,"toDOM")},avalon.pendingActions=[],avalon.uniqActions={},avalon.inTransaction=0,config.trackDeps=!1,avalon.track=function(){config.trackDeps&&avalon.log.apply(avalon,arguments)};var targetStack=[];avalon.transaction=transaction;var keyMap=avalon.oneObject("break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments"),skipMap=avalon.mix({Math:1,Date:1,$event:1,window:1,__vmodel__:1,avalon:1},keyMap),rvmKey=/(^|[^\w\u00c0-\uFFFF_])(@|##)(?=[$\w])/g,ruselessSp=/\s*(\.|\|)\s*/g,rshortCircuit=/\|\|/g,brackets=/\(([^)]*)\)/,rpipeline=/\|(?=\?\?)/,rregexp=/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/g,robjectProp=/\.[\w\.\$]+/g,robjectKey=/(\{|\,)\s*([\$\w]+)\s*:/g,rfilterName=/\|(\w+)/g,rlocalVar=/[$a-zA-Z_][$a-zA-Z0-9_]*/g,exprCache=new Cache(300),rhandleName=/^__vmodel__\.[$\w\.]+$/,rfixIE678=/__vmodel__\.([^(]+)\(([^)]*)\)/,actionUUID=1;Action.prototype={getValue:function(){var scope=this.vm;try{return this.getter.call(scope,scope)}catch(e){avalon.log(this.getter+" exec error")}},setValue:function(value){var scope=this.vm;this.setter&&this.setter.call(scope,scope,value)},get:function(fn){this.type;this.deep&&(avalon.deepCollect=!0);var value=collectDeps(this,this.getValue);return this.deep&&avalon.deepCollect&&(avalon.deepCollect=!1),value},beforeUpdate:function(){return this.oldValue=getPlainObject(this.value)},update:function(args,uuid){var oldVal=this.beforeUpdate(),newVal=this.value=this.get(),callback=this.callback;callback&&this.diff(newVal,oldVal,args)&&callback.call(this.vm,this.value,oldVal,this.expr),this._isScheduled=!1},schedule:function(){this._isScheduled||(this._isScheduled=!0,avalon.uniqActions[this.uuid]||(avalon.uniqActions[this.uuid]=1,avalon.pendingActions.push(this)),runActions())},removeDepends:function(){var self=this;this.observers.forEach(function(depend){avalon.Array.remove(depend.observers,self)})},diff:function(a,b){return a!==b},dispose:function(){this.value=null,this.removeDepends(),this.beforeDispose&&this.beforeDispose();for(var i in this)delete this[i]}};var protectedMenbers={vm:1,callback:1,observers:1,oldValue:1,value:1,getValue:1,setValue:1,get:1,removeDepends:1,beforeUpdate:1,update:1,dispose:1},obid=1;Mutation.prototype={get:function(){if(avalon.trackingAction){this.collect();var childOb=this.value;if(childOb&&childOb.$events)if(Array.isArray(childOb))childOb.forEach(function(item){item&&item.$events&&item.$events.__dep__.collect()});else if(avalon.deepCollect)for(var key in childOb)if(childOb.hasOwnProperty(key)){childOb[key]}}return this.value},collect:function(){avalon.track(name,"被收集"),reportObserved(this)},updateVersion:function(){this.version=Math.random()+Math.random()},notify:function(){transactionStart(),propagateChanged(this),transactionEnd()},set:function(newValue){var oldValue=this.value;if(newValue!==oldValue){if(avalon.isObject(newValue)){var hash=oldValue&&oldValue.$hashcode,childVM=platform.createProxy(newValue,this);childVM&&(hash&&(childVM.$hashcode=hash),newValue=childVM)}this.value=newValue,this.updateVersion(),this.notify()}}};var instability=/(\?|if\b|\(.+\))/,Computed=function(_super){function Computed(name,options,vm){_super.call(this,name,void 0,vm),delete options.get,delete options.set,avalon.mix(this,options),this.deps={},this.type="computed",this.depsVersion={},this.isComputed=!0,this.trackAndCompute(),"isStable"in this||(this.isStable=!instability.test(getBody(this.getter)))}__extends(Computed,_super);var cp=Computed.prototype;return cp.trackAndCompute=function(){this.isStable&&this.depsCount>0?this.getValue():collectDeps(this,this.getValue.bind(this))},cp.getValue=function(){return this.value=this.getter.call(this.vm)},cp.schedule=function(){for(var observers=this.observers,i=observers.length;i--;){var d=observers[i];d.schedule&&d.schedule()}},cp.shouldCompute=function(){if(this.isStable){var toComputed=!1;for(var i in this.deps)this.deps[i].version!==this.depsVersion[i]&&(toComputed=!0,this.deps[i].version=this.depsVersion[i]);return toComputed}return!0},cp.set=function(){this.setter&&avalon.transaction(this.setter,this.vm,arguments)},cp.get=function(){return this.collect(),this.shouldCompute()&&(this.trackAndCompute(),this.updateVersion()),this.value},Computed}(Mutation);avalon.define=function(definition){var $id=definition.$id;$id||avalon.error("vm.$id must be specified"),avalon.vmodels[$id]&&avalon.warn("error:["+$id+"] had defined!");var vm=platform.modelFactory(definition);return avalon.vmodels[$id]=vm},platform.modelFactory=function(definition,dd){var $computed=definition.$computed||{};delete definition.$computed;var core=new IProxy(definition,dd),$accessors=core.$accessors,keys=[];platform.hideProperty(core,"$mutations",{});for(var key in definition)if(!(key in $$skipArray)){var val=definition[key];keys.push(key),canHijack(key,val)&&($accessors[key]=createAccessor(key,val))}for(var _key in $computed)if(!(_key in $$skipArray)){var val=$computed[_key];"function"==typeof val&&(val={get:val}),val&&val.get&&(val.getter=val.get,val.setter=val.set,avalon.Array.ensure(keys,_key),$accessors[_key]=createAccessor(_key,val,!0))}var vm=platform.createViewModel(core,$accessors,core);return platform.afterCreate(vm,core,keys,!dd),vm};var $proxyItemBackdoorMap={};platform.createProxy=createProxy,platform.itemFactory=function(before,after){var keyMap=before.$model,core=new IProxy(keyMap),state=avalon.shadowCopy(core.$accessors,before.$accessors),data=after.data;for(var key in data){var val=keyMap[key]=core[key]=data[key];state[key]=createAccessor(key,val)}var keys=Object.keys(keyMap),vm=platform.createViewModel(core,state,core);return platform.afterCreate(vm,core,keys),vm},platform.fuseFactory=function(before,after){var keyMap=avalon.mix(before.$model,after.$model),core=new IProxy(avalon.mix(keyMap,{$id:before.$id+after.$id})),state=avalon.mix(core.$accessors,before.$accessors,after.$accessors),keys=Object.keys(keyMap),vm=platform.createViewModel(core,state,core);return platform.afterCreate(vm,core,keys,!1),vm};var modelAccessor={get:function(){return toJson(this)},set:avalon.noop,enumerable:!1,configurable:!0};platform.toJson=toJson,platform.modelAccessor=modelAccessor;var _splice=ap.splice,__array__={set:function(index,val){if(index>>>0===index&&this[index]!==val){if(index>this.length)throw Error(index+"set方法的第一个参数不能大于原数组长度");this.splice(index,1,val)}},toJSON:function(){return this.$model=platform.toJson(this)},contains:function(el){return-1!==this.indexOf(el)},ensure:function(el){return!this.contains(el)&&(this.push(el),!0)},pushArray:function(arr){return this.push.apply(this,arr)},remove:function(el){return this.removeAt(this.indexOf(el))},removeAt:function(index){return index>>>0===index?this.splice(index,1):[]},clear:function(){return this.removeAll(),this},removeAll:function(all){var eliminate=(this.length,Array.isArray(all)?function(el){return-1!==all.indexOf(el)}:"function"==typeof all&&all);if(eliminate)for(var i=this.length-1;i>=0;i--)eliminate(this[i],i)&&_splice.call(this,i,1);else _splice.call(this,0,this.length);this.toJSON(),this.$events.__dep__.notify()}};["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(method){var original=ap[method];__array__[method]=function(){var core=this.$events,args=platform.listFactory(arguments,!0,core.__dep__),result=original.apply(this,args);return this.toJSON(),core.__dep__.notify(method),result}}),platform.listFactory=listFactory;var canHideProperty=!0;try{Object.defineProperty({},"_",{value:"x"}),delete $$skipArray.$vbsetter,delete $$skipArray.$vbthis}catch(e){canHideProperty=!1}var protectedVB={$vbthis:1,$vbsetter:1};platform.hideProperty=hideProperty,platform.fireFactory=fireFactory,platform.watchFactory=watchFactory,platform.afterCreate=afterCreate;var defineProperty,createViewModel=Object.defineProperties,timeBucket=new Date-0;if(!canHideProperty&&("__defineGetter__"in avalon&&(defineProperty=function(obj,prop,desc){return"value"in desc&&(obj[prop]=desc.value),"get"in desc&&obj.__defineGetter__(prop,desc.get),"set"in desc&&obj.__defineSetter__(prop,desc.set),obj},createViewModel=function(obj,descs){for(var prop in descs)descs.hasOwnProperty(prop)&&defineProperty(obj,prop,descs[prop]);return obj}),msie<9)){var VBClassPool={};window.execScript(["Function parseVB(code)","\tExecuteGlobal(code)","End Function"].join("\n"),"VBScript");var VBMediator=function(instance,accessors,name,value){var accessor=accessors[name];if(4!==arguments.length)return accessor.get.call(instance);accessor.set.call(instance,value)};createViewModel=function(name,accessors,properties){var buffer=[];buffer.push("\tPrivate [$vbsetter]","\tPublic  [$accessors]","\tPublic Default Function [$vbthis](ac"+timeBucket+", s"+timeBucket+")","\t\tSet  [$accessors] = ac"+timeBucket+": set [$vbsetter] = s"+timeBucket,"\t\tSet  [$vbthis]    = Me","\tEnd Function");var uniq={$vbthis:!0,$vbsetter:!0,$accessors:!0};for(name in $$skipArray)uniq[name]||(buffer.push("\tPublic ["+name+"]"),uniq[name]=!0);for(name in accessors)uniq[name]||(uniq[name]=!0,buffer.push("\tPublic Property Let ["+name+"](val"+timeBucket+")",'\t\tCall [$vbsetter](Me, [$accessors], "'+name+'", val'+timeBucket+")","\tEnd Property","\tPublic Property Set ["+name+"](val"+timeBucket+")",'\t\tCall [$vbsetter](Me, [$accessors], "'+name+'", val'+timeBucket+")","\tEnd Property","\tPublic Property Get ["+name+"]","\tOn Error Resume Next","\t\tSet["+name+'] = [$vbsetter](Me, [$accessors],"'+name+'")',"\tIf Err.Number <> 0 Then","\t\t["+name+'] = [$vbsetter](Me, [$accessors],"'+name+'")',"\tEnd If","\tOn Error Goto 0","\tEnd Property"));for(name in properties)uniq[name]||(uniq[name]=!0,buffer.push("\tPublic ["+name+"]"));buffer.push("\tPublic [hasOwnProperty]"),buffer.push("End Class");var body=buffer.join("\r\n"),className=VBClassPool[body];return className||(className=avalon.makeHashCode("VBClass"),window.parseVB("Class "+className+body),window.parseVB(["Function "+className+"Factory(acc, vbm)","\tDim o","\tSet o = (New "+className+")(acc, vbm)","\tSet "+className+"Factory = o","End Function"].join("\r\n")),VBClassPool[body]=className),window[className+"Factory"](accessors,VBMediator)}}platform.createViewModel=createViewModel;var impDir=avalon.directive("important",{priority:1,getScope:function(name,scope){var v=avalon.vmodels[name];if(v)return v;throw"error! no vmodel called "+name},update:function(node,attrName,$id){if(avalon.inBrowser){var dom=avalon.vdom(node,"toDOM");1===dom.nodeType&&(dom.removeAttribute(attrName),avalon(dom).removeClass("ms-controller"));var vm=avalon.vmodels[$id];vm&&(vm.$element=dom,vm.$render=this,vm.$fire("onReady"),delete vm.$events.onReady)}}}),impCb=impDir.update;avalon.directive("controller",{priority:2,getScope:function(name,scope){var v=avalon.vmodels[name];return v?(v.$render=this,scope&&scope!==v?platform.fuseFactory(scope,v):v):scope},update:impCb}),avalon.directive("skip",{delay:!0});var arrayWarn={},cssDir=avalon.directive("css",{diff:function(newVal,oldVal){if(Object(newVal)===newVal){if(newVal=platform.toJson(newVal),Array.isArray(newVal)){var b={};newVal.forEach(function(el){el&&avalon.shadowCopy(b,el)}),newVal=b,arrayWarn[this.type]||(avalon.warn("ms-"+this.type+"指令的值不建议使用数组形式了！"),arrayWarn[this.type]=1)}var hasChange=!1,patch={};if(oldVal){if(this.deep){"number"==typeof this.deep&&this.deep;for(var i in newVal){if(!deepEquals(newVal[i],oldVal[i],4))return this.value=newVal,!0;patch[i]=newVal[i]}}else for(var _i4 in newVal)newVal[_i4]!==oldVal[_i4]&&(hasChange=!0),patch[_i4]=newVal[_i4];for(var _i5 in oldVal)_i5 in patch||(hasChange=!0,patch[_i5]="")}else patch=newVal,hasChange=!0;if(hasChange)return this.value=patch,!0}return!1},update:function(vdom,value){var dom=vdom.dom;if(dom&&1===dom.nodeType){var wrap=avalon(dom);for(var name in value)wrap.css(name,value[name])}}}),cssDiff=cssDir.diff,checker={TransitionEvent:"transitionend",WebKitTransitionEvent:"webkitTransitionEnd",OTransitionEvent:"oTransitionEnd",otransitionEvent:"otransitionEnd"},css3=void 0,tran=void 0,ani=void 0,name$2=void 0,animationEndEvent=void 0,transitionEndEvent=void 0;for(name$2 in checker){if(window$1[name$2]){tran=checker[name$2];break}try{document.createEvent(name$2);tran=checker[name$2];break}catch(e){}}"string"==typeof tran&&(css3=!0,transitionEndEvent=tran),checker={AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"};for(name$2 in checker)if(window$1[name$2]){ani=checker[name$2];break}"string"==typeof ani&&(css3=!0,animationEndEvent=ani);var effectDir=avalon.directive("effect",{priority:5,diff:function(effect){var vdom=this.node;"string"==typeof effect&&(this.value=effect={is:effect},avalon.warn("ms-effect的指令值不再支持字符串,必须是一个对象")),this.value=vdom.effect=effect;var me=this;return!!cssDiff.call(this,effect,this.oldValue)&&(setTimeout(function(){vdom.animating=!0,effectDir.update.call(me,vdom,vdom.effect)}),vdom.animating=!1,!0)},update:function(vdom,change,opts){var dom=vdom.dom;if(dom&&1===dom.nodeType){var option=change||opts,is=option.is,globalOption=avalon.effects[is];if(!globalOption)return void avalon.warn(is+" effect is undefined");var finalOption={},action=actionMaps[option.action];if("function"!=typeof Effect.prototype[action])return void avalon.warn("action is undefined");var effect=new avalon.Effect(dom);return avalon.mix(finalOption,globalOption,option,{action:action}),finalOption.queue?(animationQueue.push(function(){effect[action](finalOption)}),callNextAnimation()):effect[action](finalOption),!0}}}),actionMaps={true:"enter",false:"leave",enter:"enter",leave:"leave",move:"move",undefined:"enter"},animationQueue=[];avalon.effects={},avalon.effect=function(name,opts){var definition=avalon.effects[name]=opts||{};return css3&&!1!==definition.css&&(patchObject(definition,"enterClass",name+"-enter"),patchObject(definition,"enterActiveClass",definition.enterClass+"-active"),patchObject(definition,"leaveClass",name+"-leave"),patchObject(definition,"leaveActiveClass",definition.leaveClass+"-active")),definition};var Effect=function(dom){this.dom=dom};avalon.Effect=Effect,Effect.prototype={enter:createAction("Enter"),leave:createAction("Leave"),move:createAction("Move")};var staggerCache=new Cache(128);avalon.applyEffect=function(dom,vdom,opts){var cb=opts.cb,curEffect=vdom.effect;if(curEffect&&dom&&1===dom.nodeType){var hook=opts.hook,old=curEffect[hook];cb&&(Array.isArray(old)?old.push(cb):curEffect[hook]=old?[old,cb]:[cb]),getAction(opts),avalon.directives.effect.update(vdom,curEffect,avalon.shadowCopy({},opts))}else cb&&cb(dom)};var transitionDuration=avalon.cssName("transition-duration"),animationDuration=avalon.cssName("animation-duration"),rsecond=/\d+s$/,none="none";avalon.parseDisplay=parseDisplay,avalon.directive("visible",{diff:function(newVal,oldVal){var n=!!newVal;if(void 0===oldVal||n!==oldVal)return this.value=n,!0},ready:!0,update:function(vdom,show){var dom=vdom.dom;if(dom&&1===dom.nodeType){var value,display=dom.style.display;show?(display===none&&((value=vdom.displayValue)||(dom.style.display="",""===dom.style.cssText&&dom.removeAttribute("style"))),""===dom.style.display&&avalon(dom).css("display")===none&&avalon.contains(dom.ownerDocument,dom)&&(value=parseDisplay(dom))):display!==none&&(value=none,vdom.displayValue=display);var cb=function(){void 0!==value&&(dom.style.display=value)};avalon.applyEffect(dom,vdom,{hook:show?"onEnterDone":"onLeaveDone",cb:cb})}}}),avalon.directive("text",{delay:!0,init:function(){var node=this.node;node.isVoidTag&&avalon.error("自闭合元素不能使用ms-text");var child={nodeName:"#text",nodeValue:this.getValue()};node.children.splice(0,node.children.length,child),inBrowser&&(avalon.clearHTML(node.dom),node.dom.appendChild(avalon.vdom(child,"toDOM"))),this.node=child;this.type=this.name="expr";var directive$$1=avalon.directives.expr,me=this;this.callback=function(value){directive$$1.update.call(me,me.node,value)}}}),avalon.directive("expr",{update:function(vdom,value){value=null==value||""===value?"​":value,vdom.nodeValue=value,vdom.dom&&(vdom.dom.data=value)}}),avalon.directive("attr",{diff:cssDiff,update:function(vdom,value){var props=vdom.props;for(var i in value)!1==!!value[i]?delete props[i]:props[i]=value[i];var dom=vdom.dom;dom&&1===dom.nodeType&&updateAttrs(dom,value)}}),avalon.directive("html",{update:function(vdom,value){this.beforeDispose(),this.innerRender=avalon.scan('<div class="ms-html-container">'+value+"</div>",this.vm,function(){var oldRoot=this.root;vdom.children&&(vdom.children.length=0),vdom.children=oldRoot.children,this.root=vdom,vdom.dom&&avalon.clearHTML(vdom.dom)})},beforeDispose:function(){this.innerRender&&this.innerRender.dispose()},delay:!0}),avalon.directive("if",{delay:!0,priority:5,init:function(){this.placeholder=createAnchor("if");var props=this.node.props;delete props["ms-if"],delete props[":if"],this.fragment=avalon.vdom(this.node,"toHTML")},diff:function(newVal,oldVal){var n=!!newVal;if(void 0===oldVal||n!==oldVal)return this.value=n,!0},update:function(vdom,value){if(void 0===this.isShow&&value)return void continueScan(this,vdom);this.isShow=value;var placeholder=this.placeholder;if(value){var p=placeholder.parentNode;continueScan(this,vdom),p&&p.replaceChild(vdom.dom,placeholder)}else{this.beforeDispose(),vdom.nodeValue="if",vdom.nodeName="#comment",delete vdom.children;var dom=vdom.dom,p=dom&&dom.parentNode;vdom.dom=placeholder,p&&p.replaceChild(placeholder,dom)}},beforeDispose:function(){this.innerRender&&this.innerRender.dispose()}}),avalon.directive("on",{beforeInit:function(){this.getter=avalon.noop},init:function(){var vdom=this.node,underline=this.name.replace("ms-on-","e").replace("-","_"),uuid=underline+"_"+this.expr.replace(/\s/g,"").replace(/[^$a-z]/gi,function(e){return e.charCodeAt(0)}),fn=avalon.eventListeners[uuid];if(!fn){var arr=addScope(this.expr),body=arr[0],filters=arr[1];body=makeHandle(body),filters&&(filters=filters.replace(/__value__/g,"$event"),filters+="\nif($event.$return){\n\treturn;\n}");var ret=["try{","\tvar __vmodel__ = this;","\t"+filters,"\treturn "+body,'}catch(e){avalon.log(e, "in on dir")}'].filter(function(el){return/\S/.test(el)});fn=new Function("$event",ret.join("\n")),fn.uuid=uuid,avalon.eventListeners[uuid]=fn}var dom=avalon.vdom(vdom,"toDOM");dom._ms_context_=this.vm,this.eventType=this.param.replace(/\-(\d)$/,""),delete this.param,avalon(dom).bind(this.eventType,fn)},beforeDispose:function(){avalon(this.node.dom).unbind(this.eventType)}});var rident=/^[$a-zA-Z_][$a-zA-Z0-9_]*$/,rinvalid=/^(null|undefined|NaN|window|this|\$index|\$id)$/;avalon.directive("for",{delay:!0,priority:3,beforeInit:function(){var asName,str=this.expr;str=str.replace(/\s+as\s+([$\w]+)/,function(a,b){return!rident.test(b)||rinvalid.test(b)?avalon.error("alias "+b+" is invalid --- must be a valid JS identifier which is not a reserved name."):asName=b,""});var arr=str.split(" in "),kv=arr[0].match(/[$\w_]+/g);1===kv.length&&kv.unshift("$key"),this.expr=arr[1],this.keyName=kv[0],this.valName=kv[1],this.signature=avalon.makeHashCode("for"),asName&&(this.asName=asName),delete this.param},init:function(){var cb=this.userCb;if("string"==typeof cb&&cb){var arr=addScope(cb,"for"),body=makeHandle(arr[0]);this.userCb=new Function("$event","var __vmodel__ = this\nreturn "+body)}this.node.forDir=this,this.fragment=["<div>",this.fragment,"\x3c!--",this.signature,"--\x3e</div>"].join(""),this.cache={}},diff:function(newVal,oldVal){if(!this.updating){this.updating=!0;var traceIds=createFragments(this,newVal);return void 0===this.oldTrackIds||(this.oldTrackIds!==traceIds?(this.oldTrackIds=traceIds,!0):void 0)}},update:function(){if(this.preFragments?(diffList(this),updateList(this)):(this.fragments=this.fragments||[],mountList(this)),this.userCb){var me=this;setTimeout(function(){me.userCb.call(me.vm,{type:"rendered",target:me.begin.dom,signature:me.signature})},0)}delete this.updating},beforeDispose:function(){this.fragments.forEach(function(el){el.dispose()})}}),avalon.directive("class",{diff:function(newVal,oldVal){var type=this.type,vdom=this.node,classEvent=vdom.classEvent||{};"hover"===type?(classEvent.mouseenter=activateClass,classEvent.mouseleave=abandonClass):"active"===type&&(classEvent.tabIndex=vdom.props.tabindex||-1,classEvent.mousedown=activateClass,classEvent.mouseup=abandonClass,classEvent.mouseleave=abandonClass),vdom.classEvent=classEvent;var className=classNames(newVal);if(void 0===typeof oldVal||oldVal!==className)return this.value=className,vdom["change-"+type]=className,!0},update:function(vdom,value){var dom=vdom.dom;if(dom&&1==dom.nodeType){var dirType=this.type,change="change-"+dirType,classEvent=vdom.classEvent;if(classEvent){for(var i in classEvent)"tabIndex"===i?dom[i]=classEvent[i]:avalon.bind(dom,i,classEvent[i]);vdom.classEvent={}}["class","hover","active"].forEach(function(type){if(dirType===type)if("class"===type)dom&&setClass(dom,value);else{var oldClass=dom.getAttribute(change);oldClass&&avalon(dom).removeClass(oldClass);var name="change-"+type;dom.setAttribute(name,value)}})}}}),directives.active=directives.hover=directives["class"];var classMap={mouseenter:"change-hover",mouseleave:"change-hover",mousedown:"change-active",mouseup:"change-active"};getLongID(activateClass),getLongID(abandonClass);var updateDataActions={input:function(prop){var field=this;prop=prop||"value";var dom=field.dom,rawValue=dom[prop],parsedValue=field.parseValue(rawValue);field.value=rawValue,field.setValue(parsedValue),duplexCb(field);var pos=field.pos;dom.caret&&field.setCaret(dom,pos)},radio:function(){var field=this;if(field.isChecked){var val=!field.value;field.setValue(val),duplexCb(field)}else updateDataActions.input.call(field),field.value=NaN},checkbox:function(){var field=this,array=field.value;Array.isArray(array)||(avalon.warn("ms-duplex应用于checkbox上要对应一个数组"),array=[array]);var method=field.dom.checked?"ensure":"remove";if(array[method]){var val=field.parseValue(field.dom.value);array[method](val),duplexCb(field)}this.__test__=array},select:function(){var field=this,val=avalon(field.dom).val();val+""!=this.value+""&&(val=Array.isArray(val)?val.map(function(v){return field.parseValue(v)}):field.parseValue(val),field.setValue(val),duplexCb(field))},contenteditable:function(){updateDataActions.input.call(this,"innerHTML")}},rchangeFilter=/\|\s*change\b/,rdebounceFilter=/\|\s*debounce(?:\(([^)]+)\))?/,valueHijack=!0;try{var setters={},aproto=HTMLInputElement.prototype,bproto=HTMLTextAreaElement.prototype,newSetter=function(value){setters[this.tagName].call(this,value);var data=this._ms_duplex_;!this.caret&&data&&data.isString&&data.duplexCb.call(this,{type:"setter"})},inputProto=HTMLInputElement.prototype;Object.getOwnPropertyNames(inputProto),setters.INPUT=Object.getOwnPropertyDescriptor(aproto,"value").set,Object.defineProperty(aproto,"value",{set:newSetter}),setters.TEXTAREA=Object.getOwnPropertyDescriptor(bproto,"value").set,Object.defineProperty(bproto,"value",{set:newSetter}),valueHijack=!1}catch(e){}var updateView={input:function(){var vdom=this.node,value=this.value+"";vdom.dom.value=vdom.props.value=value},updateChecked:function(vdom,checked){vdom.dom&&(vdom.dom.defaultChecked=vdom.dom.checked=checked)},radio:function(){var checked,node=this.node,nodeValue=node.props.value;checked=this.isChecked?!!this.value:this.value+""===nodeValue,node.props.checked=checked,updateView.updateChecked(node,checked)},checkbox:function(){var node=this.node,props=node.props,value=props.value+"",values=[].concat(this.value),checked=values.some(function(el){return el+""===value});props.defaultChecked=props.checked=checked,updateView.updateChecked(node,checked)},select:function(){var a=Array.isArray(this.value)?this.value.map(String):this.value+"";lookupOption(this.node,a)},contenteditable:function(){for(var el,vnodes=fromString(this.value),fragment=createFragment(),i=0;el=vnodes[i++];){var child=avalon.vdom(el,"toDOM");fragment.appendChild(child)}avalon.clearHTML(this.dom).appendChild(fragment);var list=this.node.children;list.length=0,Array.prototype.push.apply(list,vnodes),this.duplexCb.call(this.dom)}};getShortID(openCaret),getShortID(closeCaret),getShortID(openComposition),getShortID(closeComposition),getShortID(updateDataHandle),getShortID(updateModelHack),getShortID(updateModelDelay),getShortID(updateModelKeyDown);var mayBeAsync=function(fn){setTimeout(fn,0)};if(avalon.directive("duplex",{priority:9999999,beforeInit:duplexBeforeInit,init:duplexInit,diff:duplexDiff,update:function(vdom,value){this.dom||duplexBind.call(this,vdom,updateDataEvents),pollValue.call(this,avalon.msie,valueHijack),updateView[this.dtype].call(this)}}),avalon.__pollValue=pollValue,avalon.msie<8){var oldUpdate=updateView.updateChecked;updateView.updateChecked=function(vdom,checked){var dom=vdom.dom;dom&&setTimeout(function(){oldUpdate(vdom,checked),dom.firstCheckedIt=1},dom.firstCheckedIt?31:16)}}avalon.directive("rules",{diff:function(rules){if(isObject(rules)){return this.node.rules=platform.toJson(rules),!0}}});var rmail=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/i,rurl=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/;avalon.shadowCopy(avalon.validators,{pattern:{message:"必须匹配{{pattern}}这样的格式",get:function(value,field,next){var elem=field.dom,data=field.data;if(!isRegExp(data.pattern)){var h5pattern=elem.getAttribute("pattern");data.pattern=new RegExp("^(?:"+h5pattern+")$")}return next(data.pattern.test(value)),value}},digits:{message:"必须整数",get:function(value,field,next){return next(/^\-?\d+$/.test(value)),value}},number:{message:"必须数字",get:function(value,field,next){return next(!!value&&isFinite(value)),value}},norequired:{message:"",get:function(value,field,next){return next(!0),value}},required:{message:"必须填写",get:function(value,field,next){return next(""!==value),value}},equalto:{message:"密码输入不一致",get:function(value,field,next){var id=String(field.data.equalto);return next(value===(avalon(document.getElementById(id)).val()||"")),value}},date:{message:"日期格式不正确",get:function(value,field,next){var data=field.data;return next(isRegExp(data.date)?data.date.test(value):isCorrectDate(value)),value}},url:{message:"URL格式不正确",get:function(value,field,next){return next(rurl.test(value)),value}},email:{message:"email格式不正确",get:function(value,field,next){return next(rmail.test(value)),value}},minlength:{message:"最少输入{{minlength}}个字",get:function(value,field,next){var num=parseInt(field.data.minlength,10);return next(value.length>=num),value}},maxlength:{message:"最多输入{{maxlength}}个字",get:function(value,field,next){var num=parseInt(field.data.maxlength,10);return next(value.length<=num),value}},min:{message:"输入值不能小于{{min}}",get:function(value,field,next){var num=parseInt(field.data.min,10);return next(parseFloat(value)>=num),value}},max:{message:"输入值不能大于{{max}}",get:function(value,field,next){var num=parseInt(field.data.max,10);return next(parseFloat(value)<=num),value}},chs:{message:"必须是中文字符",get:function(value,field,next){return next(/^[\u4e00-\u9fa5]+$/.test(value)),value}}});var valiDir=avalon.directive("validate",{diff:function(validator){var vdom=this.node;if(!vdom.validator&&isObject(validator)){vdom.vmValidator=validator,validator=platform.toJson(validator),validator.vdom=vdom,vdom.validator=validator;for(var name in valiDir.defaults)validator.hasOwnProperty(name)||(validator[name]=valiDir.defaults[name]);return validator.fields=validator.fields||[],!0}},update:function(vdom){function onManual(){valiDir.validateAll.call(validator,validator.onValidateAll)}var validator=vdom.validator,dom=validator.dom=vdom.dom;dom._ms_validate_=validator;var fields=validator.fields;collectFeild(vdom.children,fields,validator);var type=window.netscape?"keypress":"focusin";avalon.bind(document,type,function(e){var dom=e.target,duplex=dom._ms_duplex_,vdom=(duplex||{}).vdom;duplex&&vdom.rules&&!duplex.validator&&avalon.Array.ensure(fields,duplex)&&bindValidateEvent(duplex,validator)});var v=vdom.vmValidator;try{v.onManual=onManual}catch(e){}delete vdom.vmValidator,dom.setAttribute("novalidate","novalidate"),validator.validateAllInSubmit&&avalon.bind(dom,"submit",function(e){e.preventDefault(),onManual()})},validateAll:function(callback){var validator=this,vdom=this.vdom,fields=validator.fields=[];collectFeild(vdom.children,fields,validator);var fn="function"==typeof callback?callback:validator.onValidateAll,promises=validator.fields.filter(function(field){var el=field.dom;return el&&!el.disabled&&validator.dom.contains(el)}).map(function(field){return valiDir.validate(field,!0)}),uniq={};return Promise.all(promises).then(function(array){var reasons=array.concat.apply([],array);validator.deduplicateInValidateAll&&(reasons=reasons.filter(function(reason){var el=reason.element,uuid=el.uniqueID||(el.uniqueID=setTimeout("1"));return!uniq[uuid]&&(uniq[uuid]=!0)})),fn.call(validator.dom,reasons)})},validate:function(field,isValidateAll,event){var promises=[],value=field.value,elem=field.dom;if("function"!=typeof Promise&&avalon.warn("浏览器不支持原生Promise,请下载并<script src=url>引入\nhttps://github.com/RubyLouvre/avalon/blob/master/test/promise.js"),!elem.disabled){var rules=field.vdom.rules,ngs=[],isOk=!0;if(!rules.norequired||""!==value)for(var ruleName in rules){var ruleValue=rules[ruleName];if(!1!==ruleValue){var resolve,hook=avalon.validators[ruleName];promises.push(new Promise(function(a,b){resolve=a}));var next=function(a){var reason={element:elem,data:field.data,message:elem.getAttribute("data-"+ruleName+"-message")||elem.getAttribute("data-message")||hook.message,validateRule:ruleName,getMessage:getMessage};a?resolve(!0):(isOk=!1,ngs.push(reason),resolve(!1))};field.data={},field.data[ruleName]=ruleValue,hook.get(value,field,next)}}return Promise.all(promises).then(function(array){if(!isValidateAll){var validator=field.validator;isOk?validator.onSuccess.call(elem,[{data:field.data,element:elem}],event):validator.onError.call(elem,ngs,event),validator.onComplete.call(elem,ngs,event)}return ngs})}}}),rformat=/\\?{{([^{}]+)\}}/gm;valiDir.defaults={validate:valiDir.validate,onError:avalon.noop,onSuccess:avalon.noop,onComplete:avalon.noop,onManual:avalon.noop,onReset:avalon.noop,onValidateAll:avalon.noop,validateInBlur:!0,validateInKeyup:!0,validateAllInSubmit:!0,resetInFocus:!0,deduplicateInValidateAll:!1};var eventMap=avalon.oneObject("animationend,blur,change,input,click,dblclick,focus,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,scan,scroll,submit","on"),rimprovePriority=/[+-\?]/,rinnerValue=/__value__\)$/,appendChildMayThrowError={"#text":1,"#comment":1,script:1,style:1,noscript:1};avalon.scan=function(node,vm,beforeReady){return new Render(node,vm,beforeReady||avalon.noop)},Render.prototype={init:function(){var vnodes;if(this.root&&this.root.nodeType>0)vnodes=fromDOM(this.root),dumpTree(this.root);else{if("string"!=typeof this.root)return avalon.warn("avalon.scan first argument must element or HTML string");vnodes=fromString(this.root)}this.root=vnodes[0],this.vnodes=vnodes,this.scanChildren(vnodes,this.vm,!0)},scanChildren:function(children,scope,isRoot){for(var i=0;i<children.length;i++){var vdom=children[i];switch(vdom.nodeName){case"#text":scope&&this.scanText(vdom,scope);break;case"#comment":scope&&this.scanComment(vdom,scope,children);break;case"#document-fragment":this.scanChildren(vdom.children,scope,!1);break;default:this.scanTag(vdom,scope,children,!1)}}isRoot&&this.complete()},scanText:function(vdom,scope){config.rexpr.test(vdom.nodeValue)&&this.bindings.push([vdom,scope,{nodeValue:vdom.nodeValue}])},scanComment:function(vdom,scope,parentChildren){startWith(vdom.nodeValue,"ms-for:")&&this.getForBinding(vdom,scope,parentChildren)},scanTag:function(vdom,scope,parentChildren,isRoot){var hasDir,hasFor,dirs={},attrs=vdom.props;for(var attr in attrs){var value=attrs[attr],oldName=attr;if(":"===attr.charAt(0)&&(attr="ms-"+attr.slice(1)),startWith(attr,"ms-")){dirs[attr]=value;var type=attr.match(/\w+/g)[1];type=eventMap[type]||type,directives[type]||avalon.warn(attr+" has not registered!"),hasDir=!0}"ms-for"===attr&&(hasFor=value,delete attrs[oldName])}var $id=dirs["ms-important"]||dirs["ms-controller"];if($id){var templateCaches=avalon.serverTemplates,temp=templateCaches&&templateCaches[$id];if(temp){avalon.log("前端再次渲染后端传过来的模板");var node=fromString(temp)[0];for(var i in node)vdom[i]=node[i];return delete templateCaches[$id],void this.scanTag(vdom,scope,parentChildren,isRoot)}var type=dirs["ms-important"]===$id?"important":"controller",attrName="ms-"+type in attrs?"ms-"+type:":"+type;inBrowser&&delete attrs[attrName];var dir=directives[type];if(!(scope=dir.getScope.call(this,$id,scope)))return;var clazz=attrs["class"];clazz&&(attrs["class"]=(" "+clazz+" ").replace(" ms-controller ","").trim());var render=this;scope.$render=render,this.callbacks.push(function(){dir.update.call(render,vdom,attrName,$id)})}if(hasFor)return vdom.dom&&vdom.dom.removeAttribute(oldName),this.getForBindingByElement(vdom,scope,parentChildren,hasFor);/^ms\-/.test(vdom.nodeName)&&(attrs.is=vdom.nodeName),attrs.is&&(dirs["ms-widget"]||(dirs["ms-widget"]="{}"),hasDir=!0),hasDir&&this.bindings.push([vdom,scope,dirs]);var children=vdom.children;!orphanTag[vdom.nodeName]&&children&&children.length&&!delayCompileNodes(dirs)&&this.scanChildren(children,scope,!1)},complete:function(){if(this.yieldDirectives(),this.beforeReady(),inBrowser){var root$$1=this.root;if(inBrowser){groupTree(avalon.vdom(root$$1,"toDOM"),root$$1.children)}}this.mount=!0;for(var fn;fn=this.callbacks.pop();)fn();this.optimizeDirectives()},yieldDirectives:function(){for(var tuple;tuple=this.bindings.shift();){var vdom=tuple[0],scope=tuple[1],dirs=tuple[2],bindings=[];"nodeValue"in dirs?bindings=parseInterpolate(dirs):"ms-skip"in dirs||(bindings=parseAttributes(dirs,tuple));for(var binding,i=0;binding=bindings[i++];){var dir=directives[binding.type];if(inBrowser||!/on|duplex|active|hover/.test(binding.type)){dir.beforeInit&&dir.beforeInit.call(binding);var directive$$1=new Directive(scope,binding,vdom,this);this.directives.push(directive$$1)}}}},optimizeDirectives:function(){for(var el,i=0;el=this.directives[i++];)el.callback=directives[el.type].update,el.update=newUpdate,el._isScheduled=!1},update:function(){for(var el,i=0;el=this.directives[i++];)el.update()},dispose:function(){for(var el,list=this.directives||[],i=0;el=list[i++];)el.dispose();for(var _i6 in this)"dispose"!==_i6&&delete this[_i6]},getForBinding:function(begin,scope,parentChildren,userCb){var expr=begin.nodeValue.replace("ms-for:","").trim();begin.nodeValue="ms-for:"+expr;var nodes=getRange(parentChildren,begin),end=nodes.end,fragment=avalon.vdom(nodes,"toHTML");parentChildren.splice(nodes.start,nodes.length),begin.props={},this.bindings.push([begin,scope,{"ms-for":expr},{begin:begin,end:end,expr:expr,userCb:userCb,fragment:fragment,parentChildren:parentChildren}])},getForBindingByElement:function(vdom,scope,parentChildren,expr){var index=parentChildren.indexOf(vdom),props=vdom.props,begin={nodeName:"#comment",nodeValue:"ms-for:"+expr};props.slot&&(begin.slot=props.slot,delete props.slot);var end={nodeName:"#comment",nodeValue:"ms-for-end:"};parentChildren.splice(index,1,begin,vdom,end),this.getForBinding(begin,scope,parentChildren,props["data-for-rendered"])}};var viewID,componentEvents=avalon.oneObject("onInit,onReady,onViewChange,onDispose,onEnter,onLeave"),componentQueue=[];return avalon.directive("widget",{delay:!0,priority:4,deep:!0,init:function(){var vdom=this.node;if(this.cacheVm=!!vdom.props.cached,vdom.dom&&"#comment"===vdom.nodeName)var comment=vdom.dom;var oldValue=this.getValue(),value=toObject(oldValue),is=vdom.props.is||value.is;this.is=is;var component=avalon.components[is];if(!("fragment"in this))if(vdom.isVoidTag)this.fragment=!1;else{var text=vdom.children[0];text&&text.nodeValue?this.fragment=text.nodeValue:this.fragment=avalon.vdom(vdom.children,"toHTML")}if(!component)return this.readyState=0,vdom.nodeName="#comment",vdom.nodeValue="unresolved component placeholder",delete vdom.dom,void avalon.Array.ensure(componentQueue,this);var id=value.id||value.$id,hasCache=avalon.vmodels[id],fromCache=!1;if(hasCache)comVm=hasCache,this.comVm=comVm,replaceRoot(this,comVm.$render),fromCache=!0;else{"function"==typeof component&&(component=new component(value));var comVm=createComponentVm(component,value,is);this.readyState=1,fireComponentHook(comVm,vdom,"Init"),this.comVm=comVm;var innerRender=avalon.scan(component.template,comVm);comVm.$render=innerRender,replaceRoot(this,innerRender);var nodesWithSlot=[],directives$$1=[];if(this.fragment||component.soleSlot){var curVM=this.fragment?this.vm:comVm,curText=this.fragment||"{{##"+component.soleSlot+"}}",childBoss=avalon.scan("<div>"+curText+"</div>",curVM,function(){nodesWithSlot=this.root.children});directives$$1=childBoss.directives,this.childBoss=childBoss;for(var i in childBoss)delete childBoss[i]}Array.prototype.push.apply(innerRender.directives,directives$$1);var arraySlot=[],objectSlot={};component.soleSlot?arraySlot=nodesWithSlot:nodesWithSlot.forEach(function(el,i){if(el.slot){var nodes=getRange(nodesWithSlot,el);nodes.push(nodes.end),nodes.unshift(el),objectSlot[el.slot]=nodes}else if(el.props){var name=el.props.slot;name&&(delete el.props.slot,Array.isArray(objectSlot[name])?objectSlot[name].push(el):objectSlot[name]=[el])}}),component.soleSlot?insertArraySlot(innerRender.vnodes,arraySlot):insertObjectSlot(innerRender.vnodes,objectSlot)}if(comment){var dom=avalon.vdom(vdom,"toDOM");comment.parentNode.replaceChild(dom,comment),comVm.$element=innerRender.root.dom=dom,delete this.reInit}dumpTree(vdom.dom),comVm.$element=vdom.dom,groupTree(vdom.dom,vdom.children),fromCache?fireComponentHook(comVm,vdom,"Enter"):fireComponentHook(comVm,vdom,"Ready")},diff:function(newVal,oldVal){if(cssDiff.call(this,newVal,oldVal))return!0},update:function(vdom,value){switch(this.readyState){case 0:this.reInit&&(this.init(),this.readyState++);break;case 1:this.readyState++;break;default:this.readyState++;var comVm=this.comVm;avalon.viewChanging=!0,avalon.transaction(function(){for(var i in value)comVm.hasOwnProperty(i)&&(Array.isArray(value[i])?comVm[i]=value[i].concat():comVm[i]=value[i])}),fireComponentHook(comVm,vdom,"ViewChange"),delete avalon.viewChanging}this.value=avalon.mix(!0,{},value)},beforeDispose:function(){var comVm=this.comVm;this.cacheVm?fireComponentHook(comVm,this.node,"Leave"):(fireComponentHook(comVm,this.node,"Dispose"),comVm.$hashcode=!1,delete avalon.vmodels[comVm.$id],this.innerRender&&this.innerRender.dispose())}}),avalon.components={},avalon.component=function(name,component){return component.extend=componentExtend,addToQueue(name,component)},avalon})}).call(exports,__webpack_require__(6))},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var style=__webpack_require__(5),demoComponent={template:"<div class='"+style.foo+"'>{{@demoData.name}}{{@demoData.name}}</div>",defaults:{demoData:{name:"demoComponent--"}}};exports["default"]=demoComponent},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var avalon_1=__webpack_require__(4);exports["default"]={avalon:avalon_1["default"]}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var avalon=__webpack_require__(0),utils_1=__webpack_require__(2),demo_1=__webpack_require__(1);utils_1["default"].avalon.useCmpt("ms-demo",demo_1["default"],avalon);avalon.define({$id:"body"})},function(module,exports,__webpack_require__){"use strict";function useCmpt(name,cmptConfig,_avalon){_avalon.component(name,cmptConfig)}exports.__esModule=!0,exports["default"]={useCmpt:useCmpt}},function(module,exports){module.exports={foo:"_1lpTEwhAvjcCcQxfi20b_H",a:"_1mMqLkskk7H3x0T4s95grq"}},function(module,exports){var g;g=function(){return this}();try{g=g||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(g=window)}module.exports=g}],[3]);